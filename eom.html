

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Bicycle Equations Of Motion &mdash; Human Control of a Bicycle: Jason K. Moore</title>
    
    <link rel="stylesheet" href="_static/haiku.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/print.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="_static/theme_extras.js"></script>
    <link rel="top" title="Human Control of a Bicycle: Jason K. Moore" href="index.html" />
    <link rel="next" title="Extensions of the Whipple Model" href="extensions.html" />
    <link rel="prev" title="Introduction" href="introduction.html" />
 

<!-- Google Scholar metadata -->
<meta name="citation_title" content="Human Control of a Bicycle"/>
<meta name="citation_author" content="Moore, Jason Keith"/>
<meta name="resource_type" content="Dissertation"/>
<meta name="citation_dissertation_institution" content="University of California, Davis"/>
<meta name="citation_publication_date" content="2012/08/21"/>
<meta name="citation_pdf_url" content="http://mae.ucdavis.edu/~biosport/jkm/dissertation/HumanControlofaBicycle.pdf"/>

<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-15966419-5']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>

  </head>
  <body>
      <div class="header"><h1 class="heading"><a href="index.html">
          <span>Human Control of a Bicycle: Jason K. Moore</span></a></h1>
        <h2 class="heading"><span>Bicycle Equations Of Motion</span></h2>
      </div>
      <div class="topnav">
      
        <p>
        «&#160;&#160;<a href="introduction.html">Introduction</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="extensions.html">Extensions of the Whipple Model</a>&#160;&#160;»
        </p>

      </div>
      <div class="content">
        
        

  <div class="section" id="bicycle-equations-of-motion">
<span id="eom"></span><h1>Bicycle Equations Of Motion<a class="headerlink" href="#bicycle-equations-of-motion" title="Permalink to this headline">¶</a></h1>
<div class="section" id="preface">
<h2>Preface<a class="headerlink" href="#preface" title="Permalink to this headline">¶</a></h2>
<p>Attempting to derive the equations of motion of the Whipple bicycle model was
the trigger which solidified my graduate research topic. I attempted the
derivation for my class project in Mont Hubbard&#8217;s winter 2006 multi-body
dynamics class and struggled with it well into the summer before finally
getting a mostly correct answer. After the fact, I realized much of my pain was
caused by a single missing apostrophe in my Autolev source code<a class="footnote-reference" href="#apostrophe" id="id1">[1]</a>.
Luckily another student in the class, Thomas Englehardt, had also derived the
equations and helped me debug by sharing his code and going over his methods.
Even then, it turned out that my original equations weren&#8217;t &#8220;exactly&#8221; correct
and it wasn&#8217;t until Luke Peterson joined our lab and got the bicycle dynamics
itch did I get the bugs sorted out in my derivation with his help.
Conversations and collaboration with Luke have improved the derivation
significantly and influence much of what follows. Luke has also continued to
improve the derivation with the goal of printing the first compact symbolic
result. With careful parameterization and selection of generalized speeds, the
non-linear equations may be able to be put into human readable form.</p>
</div>
<div class="section" id="non-linear-equations-of-motion">
<h2>Non-linear Equations of Motion<a class="headerlink" href="#non-linear-equations-of-motion" title="Permalink to this headline">¶</a></h2>
<p>The Whipple Model is the foundation of all the models presented in this
dissertation. This section details derivation of the non-linear equations of
motion using Kane&#8217;s method <a class="reference internal" href="zreferences.html#kane1985">[KL85]</a><a class="footnote-reference" href="#kane" id="id3">[2]</a>. The non-linear equations of
motion are algebraically unwieldy and no one so far has publicly printed them
in a form compact enough to print on reasonably sized paper, and certainly not
in a form suitable for any in-depth analytical understanding as pointed out in
<a class="reference internal" href="zreferences.html#meijaard2007">[MPRS07]</a>. My methodology relies heavily on computer aided algebra to do
the bookkeeping in the derivation, so I will only describe the necessary
details to correctly derive the equations, leaving the algebra, trigonometry
and calculus to the computer. The symbolic equations of motion herein were
originally developed using Autolev <a class="reference internal" href="zreferences.html#kane2000">[KL00]</a>, a proprietary and now defunct
software package for symbolically deriving equations of motion for multi-body
systems. I&#8217;ve since used the open source software <a class="reference external" href="http://sympy.org">SymPy</a>
to derive the equations with the help of the included <tt class="docutils literal"><span class="pre">mechanics</span></tt> package
which was developed in our lab to provide a software package suitable for
academia with capabilities similar to Autolev<a class="footnote-reference" href="#autolev" id="id6">[3]</a>. The input code for
both software packages are available in the <tt class="docutils literal"><span class="pre">src/eom</span></tt> directory of the
dissertation source files.</p>
<div class="section" id="model-description">
<h3>Model Description<a class="headerlink" href="#model-description" title="Permalink to this headline">¶</a></h3>
<p>The <em>Whipple Bicycle Model</em> <a class="reference internal" href="zreferences.html#whipple1899">[Whi99]</a> is defined by this set of
assumptions:</p>
<ul class="simple">
<li>The model is made up of four rigid bodies: the rear frame (the main
bicycle frame which may or may not include a rigid rider), the front frame
(typically the fork and handlebar assembly), and two wheels.</li>
<li>The bodies are connected to each other by frictionless revolute joints.</li>
<li>The wheels have knife edges and contact the ground under pure rolling with no
side-slip.</li>
<li>The complete bicycle is assumed to be laterally symmetric.</li>
<li>The bicycle rolls on flat ground.</li>
</ul>
<p><a class="reference internal" href="zreferences.html#astrom2005">[ASKL05]</a>, <a class="reference internal" href="zreferences.html#limebeer2006">[LS06]</a>, and <a class="reference internal" href="zreferences.html#meijaard2007">[MPRS07]</a> all provide excellent
overviews of the model, its history, and its features.</p>
<p>Unfortunately the word &#8220;model&#8221; is often ambiguous. I will attempt to be as
precise as possible with my wording. For this chapter, I consider a dynamic
model, such as the <em>Whipple Bicycle Model</em>, to be equivalent to another
dynamic model if at least the minimal set of equations of motions are the same
(i.e. they give the same result when evaluated at a particular configuration
and state of interest). This implies that the Whipple Bicycle Model linearized
about the nominal configuration is a different model than the non-linear
<em>Whipple Bicycle Model</em>. I will try to be explicit when discussing the various
models.</p>
<p>I will use the following terminology and labels for the four rigid bodies, see
<a class="reference internal" href="#figbicyclegeometry"><em>Figure 3.2</em></a>:</p>
<dl class="docutils">
<dt>Rear Frame, <span class="math">\(C\)</span></dt>
<dd>The main bicycle frame which may include parts or all of the rider.</dd>
<dt>Rear Wheel, <span class="math">\(D\)</span></dt>
<dd>The rear wheel of the bicycle.</dd>
<dt>Front Frame, <span class="math">\(E\)</span></dt>
<dd>The fork and handlebar assembly.</dd>
<dt>Front Wheel, <span class="math">\(F\)</span></dt>
<dd>The front wheel of the bicycle.</dd>
</dl>
</div>
<div class="section" id="parameterization">
<span id="id11"></span><h3>Parameterization<a class="headerlink" href="#parameterization" title="Permalink to this headline">¶</a></h3>
<p>The benchmark derivation of the linear Whipple model <a class="reference internal" href="zreferences.html#meijaard2007">[MPRS07]</a> about the
nominal configuration uses a non-minimal set of parameters based on typical
geometric parameters and inertia definitions using an inertially fixed
reference frame in which the <span class="math">\(x\)</span> axis points forward and the <span class="math">\(z\)</span>
axis points down, <a class="reference internal" href="#figtypicalbicyclegeometry"><em>Figure 3.1</em></a>. The <em>nominal
configuration</em> is defined as the configuration when the steering angle is zero
and the bicycle is upright with respect to gravity and the ground plane. The
parameters presented in <a class="reference internal" href="zreferences.html#meijaard2007">[MPRS07]</a> are not necessarily the best choice of
parameters, especially when looking at the model from a non-linear perspective,
as they are not the simplest set nor a minimal set. For example, the benchmark
parameters can be reduced in number by making use of gyrostats, see
<a class="reference internal" href="zreferences.html#sharp2008a">[Sha08]</a> for an implementation. Choosing a minimum, constant set of
parameters can certainly reduce the complexity of the resulting non-linear
equations. In this derivation, I use a parameterization with different geometry
and inertial definitions to facilitate a more intuitive non-linear derivation,
but do not make use of gyrostats to reduce the number of parameters.</p>
</div>
<div class="section" id="geometry">
<span id="id15"></span><h3>Geometry<a class="headerlink" href="#geometry" title="Permalink to this headline">¶</a></h3>
<p>The geometry of the Whipple model can be parameterized in an infinite number of
ways. It is typical and often natural to define the geometry with respect to
the descriptions of bicycle geometry used in the bicycle fabrication industry,
such as wheel diameter, head tube angle, trail and or rake, <a class="reference internal" href="#figtypicalbicyclegeometry"><em>Figure
3.1</em></a>. Choices of parameterizations like these create
unnecessary complications when developing the non-linear equations of motion
because they are typically defined with respect to only the nominal
configuration of the bicycle and are not constant with respect to the system
configuration.</p>
<div class="figure align-center" id="figtypicalbicyclegeometry">
<a class="reference external image-reference" href="_images/typical-bicycle-geometry.png"><img alt="_images/typical-bicycle-geometry.png" src="_images/typical-bicycle-geometry.png" style="width: 2.36in;" /></a>
<p class="caption">The typical parameterization of the fundamental bicycle&#8217;s geometry given in
<a class="reference internal" href="zreferences.html#meijaard2007">[MPRS07]</a>. The wheelbase <span class="math">\(w\)</span>, trail <span class="math">\(c\)</span>, steer axis tilt
<span class="math">\(\lambda\)</span>, front wheel radius <span class="math">\(r_F\)</span>, and rear wheel radius
<span class="math">\(r_R\)</span> are shown.</p>
</div>
<p>With that in mind and after trying various parameterizations, I use geometric
formulation presented by <a class="reference internal" href="zreferences.html#psiaki1979">[Psi79]</a><a class="footnote-reference" href="#psiaki" id="id18">[4]</a>. The wheels are described by
their radius <span class="math">\(\left(r_{F,R}\geq0\right)\)</span> and the remaining geometry is
defined by three distances, all of which are configuration invariant. The
distance <span class="math">\(d_1\)</span> is the offset to the center of the rear wheel from the
steer axis and <span class="math">\(d_3\)</span> is the offset of the front wheel from the steering
axis. <span class="math">\(d_2\)</span> is then the distance between the wheel centers as measured
along the steer axis. <a class="reference internal" href="#figbicyclegeometry"><em>Figure 3.2</em></a> gives a complete
visual description of the bodies and the geometry.</p>
<div class="figure align-center" id="figbicyclegeometry">
<a class="reference external image-reference" href="_images/bicycle-geometry.png"><img alt="_images/bicycle-geometry.png" src="_images/bicycle-geometry.png" style="width: 3.75in;" /></a>
<p class="caption">The bicycle in the nominal configuration. The rigid bodies are the rear
frame <span class="math">\(C\)</span>, rear wheel <span class="math">\(D\)</span>, front frame <span class="math">\(E\)</span>, and front
wheel <span class="math">\(F\)</span>. The geometric parameters and important points are also
shown.</p>
</div>
</div>
<div class="section" id="generalized-coordinates">
<h3>Generalized Coordinates<a class="headerlink" href="#generalized-coordinates" title="Permalink to this headline">¶</a></h3>
<p>The bicycle is completely configured in a Newtonian reference frame by nine
generalized coordinates: six coordinates locate and orient the rear frame in
space and three additional coordinates are needed for the three revolute joints
connecting the front frame and wheels to the rear frame. I made use of the SAE
vehicle dynamics reference frame standard and all rotations are are defined as
positive right-handed which makes the configuration identical to that in
<a class="reference internal" href="zreferences.html#meijaard2007">[MPRS07]</a><a class="footnote-reference" href="#standard" id="id20">[5]</a>. The rotation matrices are defined as</p>
<div class="math" id="equation-eqRotationDefinition">
<span class="eqno">(1)</span>\[^a \bar{v} = {}^N\mathbf{R}^A\ {}^n \bar{v}\]</div>
<p>where <span class="math">\(^n\bar{v}\)</span> is a vector expressed in the <span class="math">\(N\)</span> frame and
<span class="math">\(^a\bar{v}\)</span> is the same vector expressed in the <span class="math">\(A\)</span> frame.</p>
<div class="figure align-center" id="figbicyclecoordinates">
<a class="reference external image-reference" href="_images/bicycle-coordinates.png"><img alt="_images/bicycle-coordinates.png" src="_images/bicycle-coordinates.png" style="width: 3.6in;" /></a>
<p class="caption">The bicycle in a general configuration showing each of the eight generalized
coordinates.</p>
</div>
<p>To configure the bicycle, begin by locating the point that follows the rear
wheel contact in the ground plane of the Newtonian reference frame, <span class="math">\(N\)</span>,
with longitudinal and lateral coordinates <span class="math">\(q_1\)</span> and <span class="math">\(q_2\)</span>,
respectively, see <a class="reference internal" href="#figbicyclecoordinates"><em>Figure 3.3</em></a>. Then orient the
rear frame, <span class="math">\(C\)</span>, with respect to the Newtonian reference frame through a
body-fixed 3-1-2 rotation defining the yaw angle, <span class="math">\(q_3\)</span>, the roll angle,
<span class="math">\(q_4\)</span>, and the pitch angle, <span class="math">\(q_5\)</span>. The intermediate frames yaw,
<span class="math">\(A\)</span>, and roll, <span class="math">\(B\)</span>, are implicitly generated. The rotation matrix of
<span class="math">\(C\)</span> relative to <span class="math">\(N\)</span> is then</p>
<div class="math" id="equation-eqNtoC">
<span class="eqno">(2)</span>\[\begin{split}^N\mathbf{R}^C =
\begin{bmatrix}
  c_3c_5 - s_3s_4s_5 &amp; s_4s_5c_3 + s_3c_5 &amp; -s_5c_4\\
  -s_3c_4 &amp; c_3c_4  &amp; s_4\\
  s_5c_3 + s_3s_4c_5 &amp; s_3s_5 - s_4c_3c_5 &amp; c_4c_5
\end{bmatrix}\end{split}\]</div>
<p>where the notation <span class="math">\(s_i = \operatorname{sin}(q_i)\)</span> and <span class="math">\(c_i =
\operatorname{cos}(q_i)\)</span> in <a href="#equation-eqNtoC">(2)</a> and also all subsequent equations in
this chapter.</p>
<p>The rear wheel, <span class="math">\(D\)</span>, rotates with respect to the rear frame about the
<span class="math">\(\hat{c}_2\)</span> axis through <span class="math">\(q_6\)</span>.</p>
<div class="math" id="equation-eqCtoD">
<span class="eqno">(3)</span>\[\begin{split}^C\mathbf{R}^D =
\begin{bmatrix}
  c_6 &amp; 0 &amp; -s_6\\
  0 &amp; 1 &amp; 0\\
  s_6 &amp; 0 &amp; c_6
\end{bmatrix}\end{split}\]</div>
<p>The front frame, <span class="math">\(E\)</span>, rotates with respect to the rear frame about the
<span class="math">\(\hat{c}_3\)</span> axis through the steering angle, <span class="math">\(q_7\)</span>.</p>
<div class="math" id="equation-eqCtoE">
<span class="eqno">(4)</span>\[\begin{split}^C\mathbf{R}^E =
\begin{bmatrix}
  c_7 &amp; s_7 &amp; 0\\
  -s_7 &amp; c_7 &amp; 0\\
  0 &amp; 0 &amp; 1
\end{bmatrix}\end{split}\]</div>
<p>Finally, the front wheel, <span class="math">\(F\)</span>, rotates with respect to the front frame
through <span class="math">\(q_8\)</span> about the <span class="math">\(\hat{e}_2\)</span> axis.</p>
<div class="math" id="equation-eqEtoF">
<span class="eqno">(5)</span>\[\begin{split}^E\mathbf{R}^F =
\begin{bmatrix}
  c_8 &amp; 0 &amp; -s_8\\
  0 &amp; 1 &amp; 0\\
  s_8 &amp; 0 &amp; c_8
\end{bmatrix}\end{split}\]</div>
<p>The first two coordinates locate the rear wheel contact point in the Newtonian
reference frame and the remaining six coordinates orient the four rigid bodies
within the Newtonian reference frame.</p>
<p>The positions of the various points on the bicycle must be defined with respect
to the Newtonian reference frame. There are six primary points of interest: the
four mass centers, <span class="math">\(d_o,c_o,e_o,f_o\)</span>, and the two points fixed on the
wheels which are instantaneously in contact with the ground, <span class="math">\(d_n,f_n\)</span><a class="footnote-reference" href="#wheelcontact" id="id21">[6]</a>.</p>
<p>The mass center of the rear wheel, <span class="math">\(d_o\)</span>, is assumed to be at the center
of the wheel and is located by</p>
<div class="math" id="equation-eqRearWheelMassCenter">
<span class="eqno">(6)</span>\[\bar{r}^{d_o/n_o} = q_1\hat{n}_1 + q_2\hat{n}_2 - r_R\hat{b}_3\]</div>
<p>The rear frame mass center, <span class="math">\(c_o\)</span>, is located by two additional
parameters</p>
<div class="math" id="equation-eqFrameMassCenter">
<span class="eqno">(7)</span>\[\bar{r}^{c_o/d_o} = l_1\hat{c}_1 + l_2\hat{c}_3\]</div>
<p>For convenience, define an additional point on the steer axis, <span class="math">\(c_e\)</span>,
such that</p>
<div class="math" id="equation-eqDoToCe">
<span class="eqno">(8)</span>\[\bar{r}^{c_e/d_o} = d_1\hat{c}_1\]</div>
<p>The mass center of the front wheel, <span class="math">\(f_o\)</span>, is then located by:</p>
<div class="math" id="equation-eqFrontWheelMassCenter">
<span class="eqno">(9)</span>\[\bar{r}^{f_o/c_e} =  d_2\hat{c}_3 + d_3\hat{e}_1\]</div>
<p>The front frame mass center, <span class="math">\(e_o\)</span>, is located by two more additional
parameters:</p>
<div class="math" id="equation-eqForkMassCenter">
<span class="eqno">(10)</span>\[\bar{r}^{e_o/f_o} = l_3\hat{e}_1 + l_4\hat{e}_3\]</div>
<p>The location of the point on the rear wheel instantaneously in contact with the
ground in the Newtonian frame is then defined by</p>
<div class="math" id="equation-eqRearWheelContact">
<span class="eqno">(11)</span>\[\bar{r}^{d_n/d_o} = r_F\hat{b}_3\]</div>
<p>The location of the front wheel contact point is less trivial. The vector from
the front wheel center to the contact point is defined as</p>
<div class="math" id="equation-eqFrontWheelContact">
<span class="eqno">(12)</span>\[\bar{r}^{f_n/f_o} = r_F\left(\frac{(\hat{e}_2\times\hat{a}_3)\times\hat{e}_2}
{||(\hat{e}_2\times\hat{a}_3)\times\hat{e}_2||}\right)\]\[\bar{r}^{f_n/f_o} =
r_F(s_4s_7-s_5c_4c_7)/(c_4^2c_5^2+(s_4s_7-s_5c_4c_7)^2)^{1/2}\hat{e}_1 +
r_Fc_4c_5/(c_4^2c_5^2+(s_4s_7-s_5c_4c_7)^2)^{1/2}\hat{e}_3\]</div>
<p>Here the triple cross product divided by its magnitude represents the unit
vector pointing from the front wheel center to the point on the front wheel
instantaneously in contact with the ground. <a class="reference internal" href="zreferences.html#basu-mandal2007">[BMCP07]</a> give a good
explanation and diagram. Another description of this vector is in terms of dot
products, i.e. subtract the <span class="math">\(\hat{n}_3\)</span> component of <span class="math">\(\hat{e}_2\)</span>
from <span class="math">\(\hat{n}_3\)</span> to get a vector that points from the front wheel center
to the contact point.</p>
<div class="math" id="equation-eqFrontWheelContactDot">
<span class="eqno">(13)</span>\[\bar{r}^{f_n/f_o} =
r_F\left(\frac{\hat{a}_3 - (\hat{e}_2 \cdot\hat{a}_3)\hat{e}_2}
{||\hat{a}_3 - (\hat{e}_2 \cdot\hat{a}_3)\hat{e}_2||}\right)\]</div>
<p>This is easily shown to be equivalent to <a href="#equation-eqFrontWheelContact">(12)</a> by writing
the triple cross product as sum of dot products.</p>
</div>
<div class="section" id="holonomic-constraints">
<h3>Holonomic Constraints<a class="headerlink" href="#holonomic-constraints" title="Permalink to this headline">¶</a></h3>
<p>Two holonomic configuration constraints, arising from the fact that both wheels
must touch the ground, complicate the model derivation. The first holonomic
equation is obviated by definition of the rear wheel center
<a href="#equation-eqRearWheelMassCenter">(6)</a>. This enforces that the rear wheel contact point
cannot have an displacement in the <span class="math">\(\hat{n}_3\)</span> direction<a class="footnote-reference" href="#holonomic" id="id23">[7]</a>.
The second holonomic constraint is enforced by requiring the front wheel to
touch the ground plane. The constraint is characterized by a non-linear
relationship between the roll angle <span class="math">\(q_4\)</span>, steer angle <span class="math">\(q_7\)</span> and
pitch angle <span class="math">\(q_5\)</span>.</p>
<div class="math" id="equation-eqHolonomicConstraint">
<span class="eqno">(14)</span>\[\begin{split}\bar{r}^{f_n/d_n}\cdot\hat{a}_3 =
&amp;d_2c_4c_5 - d_1s_5c_4 + r_Rc_4 +
r_Fc_4^2c_5^2/(c_4^2c_5^2+(s_4s_7-s_5c_4c_7)^2)^{1/2} -\\
&amp;(s_4s_7-s_5c_4c_7)(d_3+r_F(s_4s_7-s_5c_4c_7)/(c_4^2c_5^2+
(s_4s_7-s_5c_4c_7)^2)^{1/2}) = 0\end{split}\]</div>
<p>In this equation, pitch, <span class="math">\(q_6\)</span>, is defined as the dependent coordinate.
The choice of pitch has to do with the fact that for &#8220;normal&#8221; bicycle
configurations, pitch is practically constant. This is not universal and it may
be smart to choose the dependent coordinate differently for other cases. The
constraint equation can actually be formulated into a quartic in the sine of
the pitch (<a class="reference internal" href="zreferences.html#psiaki1979">[Psi79]</a>, <a class="reference internal" href="zreferences.html#peterson2008">[PH08a]</a>) which does have an analytic, albeit
lengthy, solution. I do not opt for the analytical solution, so care is needed
when simulating and linearizing to properly choose the proper roots associated
with this dependent coordinate.</p>
</div>
<div class="section" id="kinematical-differential-equations">
<h3>Kinematical Differential Equations<a class="headerlink" href="#kinematical-differential-equations" title="Permalink to this headline">¶</a></h3>
<p>The choice of generalized speeds can significantly reduce the length of the
equations of motion <a class="reference internal" href="zreferences.html#mitiguy1996">[MK96]</a>. This is beneficial for both working with
the analytical forms of the equations of motion and the efficiency in
computation. Even though this is true, little effort was spent in selecting
optimal generalized speeds, as the analytical form of the equations of motion
of this system would be difficult to interpret regardless of the choice and
because computational speed was of little concern. For <span class="math">\(i=1,\dotsc,8\)</span>
simply choose the generalized speeds to be equal to the time derivatives of the
generalized coordinates</p>
<div class="math" id="equation-eqGenerlizedSpeeds">
<span class="eqno">(15)</span>\[u_i = \dot{q}_i\]</div>
</div>
<div class="section" id="velocity">
<h3>Velocity<a class="headerlink" href="#velocity" title="Permalink to this headline">¶</a></h3>
<p>The angular and linear velocities of each rigid body are required for computing
the partial velocities and accelerations used in Kane&#8217;s method. Also, the
velocities of the points on the wheels at the ground contact points are needed
for the development of the nonholomic constraints. The angular velocity of the
rear frame, <span class="math">\(C\)</span>, in <span class="math">\(N\)</span> is</p>
<div class="math" id="equation-eqOmegaCinN">
<span class="eqno">(16)</span>\[^N\bar{\omega}^C =
(c_5u_4-s_5c_4u_3)\hat{c}_1 +
(u_5+s_4u_3)\hat{c}_2 +
(s_5u_4+c_4c_5u_3)\hat{c}_3\]</div>
<p>Both the front frame and the rear wheel are connected to the bicycle rear frame
by simple revolute joints, so the angular velocities are simply</p>
<div class="math" id="equation-eqOmegaDinC">
<span class="eqno">(17)</span>\[^C\bar{\omega}^D = u_6 \hat{c}_2\]</div>
<p>and</p>
<div class="math" id="equation-eqOmegaEinC">
<span class="eqno">(18)</span>\[^C\bar{\omega}^E = u_7 \hat{c}_3\]</div>
<p>The front wheel has angular velocity relative to the front frame</p>
<div class="math" id="equation-eqOmegaFinE">
<span class="eqno">(19)</span>\[^E\bar{\omega}^F = u_8 \hat{e}_2\]</div>
<p>The angular velocity of any of the bodies can now be computed with respect to
the Newtonian reference frame. For example,</p>
<div class="math" id="equation-eqOmegaFinN">
<span class="eqno">(20)</span>\[^N\bar{\omega}^F = {}^N\bar{\omega}^C + {}^C\bar{\omega}^E + {}^E\bar{\omega}^F\]</div>
<p>which expands to</p>
<div class="math" id="equation-eqOmegaFinNExpanded">
<span class="eqno">(21)</span>\[\begin{split}^N\bar{\omega}^F =
&amp;(s_7c_8u_5-s_8u_7-(s_5s_8-c_5c_7c_8)u_4-
(s_8c_4c_5-c_8(s_4s_7-s_5c_4c_7))u_3)\hat{f}_1 + \\
&amp;(u_8+c_7u_5+(s_4c_7+s_5s_7c_4)u_3-s_7c_5u_4)\hat{f}_2 + \\
&amp;(c_8u_7+s_7s_8u_5+(s_5c_8+s_8c_5c_7)u_4+
(c_4c_5c_8+s_8(s_4s_7-s_5c_4c_7))u_3)\hat{f}_3\end{split}\]</div>
<p>Using the angular velocities and the position vectors, the velocities of the
mass centers can be computed. Starting with mass center of the rear wheel</p>
<div class="math" id="equation-eqDoInN">
<span class="eqno">(22)</span>\[^N\bar{v}^{d_o} = \frac{d}{dt}\left(\bar{r}^{d_o/n_o}\right)
= u_1\hat{n}_1 + u_2\hat{n}_2 - r_Rs_4u_3\hat{b}_1 + r_Ru_4\hat{b}_2\]</div>
<p>The remaining velocities can be computed by taking advantage of the fact that
various pairs of points are fixed on the same rigid body. The mass centers of
the rear wheel, <span class="math">\(d_o\)</span> and the rear frame, <span class="math">\(c_o\)</span>, and the steer axis
point, <span class="math">\(c_e\)</span>, (<a class="reference internal" href="#figbicyclegeometry"><em>Figure 3.2</em></a>) all lie on the rear
frame.</p>
<div class="math" id="equation-eqCoInN">
<span class="eqno">(23)</span>\[^N\bar{v}^{c_o} = {}^N\bar{v}^{d_o} + {}^N\bar{\omega}^C\times\bar{r}^{c_o/d_o}\]</div>
<p>where</p>
<div class="math">
\[^N\bar{\omega}^C\times\bar{r}^{c_o/d_o} =
l_2(u_5+s_4u_3)\hat{c}_1 +
(l_1(s_5u_4+c_4c_5u_3)-l_2(c_5u_4-s_5c_4u_3))\hat{c}_2 -
l_1(u_5+s_4u_3)\hat{c}_3\]</div>
<p>and</p>
<div class="math" id="equation-eqCeInN">
<span class="eqno">(24)</span>\[^N\bar{v}^{c_e} = {}^N\bar{v}^{d_o} + {}^N\bar{\omega}^C\times\bar{r}^{c_e/d_o}\]</div>
<p>where</p>
<div class="math">
\[^N\bar{\omega}^C\times\bar{r}^{c_e/d_o} = d_1(s_5u_4+c_4c_5u_3)\hat{c}_2 -
d_1(u_5+s_4u_3)\hat{c}_3\]</div>
<p>The velocity of the front wheel mass center is computed with respect to the
steer axis point as they both lie on the front frame</p>
<div class="math" id="equation-eqFoInN">
<span class="eqno">(25)</span>\[^N\bar{v}^{f_o} = {}^N\bar{v}^{c_e} + {}^N\bar{\omega}^E\times\bar{r}^{f_o/c_e}\]</div>
<p>where</p>
<div class="math">
\[\begin{split}^N\bar{\omega}^E\times\bar{r}^{f_o/c_e} =
&amp;-d_2(s_7c_5u_4-c_7u_5-(s_4c_7+s_5s_7c_4)u_3)\hat{e}_1 + \\
&amp;(d_3(u_7+s_5u_4+c_4c_5u_3)-d_2(s_7u_5+c_5c_7u_4+
(s_4s_7-s_5c_4c_7)u_3))\hat{e}_2 + \\
&amp;d_3(s_7c_5u_4-c_7u_5-(s_4c_7+s_5s_7c_4)u_3)\hat{e}_3\end{split}\]</div>
<p>Then the velocity of the front frame mass center is similarly</p>
<div class="math" id="equation-eqEoInN">
<span class="eqno">(26)</span>\[^N\bar{v}^{e_o} = {}^N\bar{v}^{f_o} + {}^N\bar{\omega}^E\times\bar{r}^{e_o/f_o}\]</div>
<p>where</p>
<div class="math">
\[\begin{split}^N\bar{\omega}^E\times\bar{r}^{e_o/f_o} =
&amp;-l_4(s_7c_5u_4-c_7u_5-(s_4c_7+s_5s_7c_4)u_3)\hat{e}_1 +\\
&amp;(l_3(u_7+s_5u_4+c_4c_5u_3)-l_4(s_7u_5+c_5c_7u_4+(s_4s_7-s_5c_4c_7)u_3))\hat{e}_2 +\\
&amp;l_3(s_7c_5u_4-c_7u_5-(s_4c_7+s_5s_7c_4)u_3)\hat{e}_3\end{split}\]</div>
<p>The velocity of the contact points on the wheel are needed to enforce the
no-slip condition and can be computed with respect to the rear and front wheel
centers. The rear contact point is</p>
<div class="math" id="equation-eqDnInN">
<span class="eqno">(27)</span>\[^N\bar{v}^{d_n} = {}^N\bar{v}^{d_o} + {}^N\bar{\omega}^D\times\bar{r}^{d_n/d_o}\]</div>
<p>where</p>
<div class="math">
\[^N\bar{\omega}^D\times\bar{r}^{d_n/d_o} = r_R(u_5+u_6+s_4u_3)\hat{b}_1 - r_Ru_4\hat{b}_2\]</div>
<p>which simplifies to</p>
<div class="math" id="equation-eqSimpleDnInN">
<span class="eqno">(28)</span>\[^N\bar{v}^{d_n} = r_R(u_5+u_6)\hat{b}_1 + u_1\hat{n}_1 + u_2\hat{n}_2\]</div>
<p>The front wheel contact velocity is</p>
<div class="math" id="equation-eqFnInN">
<span class="eqno">(29)</span>\[^N\bar{v}^{f_n} = {}^N\bar{v}^{f_o} + {}^N\bar{\omega}^F\times\bar{r}^{f_n/f_o}\]</div>
<p>where</p>
<div class="math">
\[\begin{split}^N\bar{\omega}^F\times\bar{r}^{f_n/f_o} =
&amp;r_F/(c_4^2c_5^2+(s_4s_7-s_5c_4c_7)^2)^{1/2}\\
&amp;[ -c_4c_5(s_7c_5u_4-u_8-c_7u_5-(s_4c_7+s_5s_7c_4)u_3)\hat{e}_1 - \\
&amp;(c_4c_7u_4+s_7c_4c_5u_5-s_4s_5s_7u_4-(s_4s_7-s_5c_4c_7)u_7)\hat{e}_2 + \\
&amp; (s_4s_7-s_5c_4c_7)(s_7c_5u_4-u_8-c_7u_5-(s_4c_7+
s_5s_7c_4)u_3)\hat{e}_3 ]\end{split}\]</div>
</div>
<div class="section" id="acceleration">
<h3>Acceleration<a class="headerlink" href="#acceleration" title="Permalink to this headline">¶</a></h3>
<p>The angular acceleration of each body along with the linear acceleration of
each mass center are required to form <span class="math">\(F_r^*\)</span> in Kane&#8217;s equations. The
angular acceleration of the rear frame, <span class="math">\(C\)</span>, in <span class="math">\(N\)</span> is</p>
<div class="math" id="equation-alphaCinN">
<span class="eqno">(30)</span>\[\begin{split}^N\bar{\alpha}^C =
&amp;(s_4s_5u_3u_4+c_5\dot{u}_4-s_5u_4u_5-c_4c_5u_3u_5-s_5c_4\dot{u}_3)\hat{c}_1 + \\
&amp;(c_4u_3u_4+\dot{u}_5+s_4\dot{u}_3)\hat{c}_2 +\\
&amp;(c_5u_4u_5+s_5\dot{u}_4+c_4c_5\dot{u}_3-s_4c_5u_3u_4-s_5c_4u_3u_5)\hat{c}_3\end{split}\]</div>
<p>The remaining bodies&#8217; angular accelerations follow from simple rotations</p>
<div class="math" id="equation-alphaDinC">
<span class="eqno">(31)</span>\[^C\bar{\alpha}^D = \dot{u}_6\hat{c}_2\]</div>
<div class="math" id="equation-alphaEinC">
<span class="eqno">(32)</span>\[^C\bar{\alpha}^E = \dot{u}_7\hat{c}_3\]</div>
<div class="math" id="equation-alphaFinE">
<span class="eqno">(33)</span>\[^E\bar{\alpha}^F = \dot{u}_8\hat{e}_2\]</div>
<p>The linear acceleration of each mass center can then be computed. The
acceleration of the rear wheel center of mass is</p>
<div class="math" id="equation-aDoInN">
<span class="eqno">(34)</span>\[^N\bar{a}^{d_o} = \frac{d}{dt}\left(^N\bar{v}^{d_o}\right)\]\[^N\bar{a}^{d_o} = \dot{u}_1\hat{n}_1 + \dot{u}_2\hat{n}_2 -
r_Rs_4u_3^2\hat{a}_2 - r_R(2c_4u_3u_4+s_4\dot{u}_3)\hat{b}_1 +
r_R\dot{u}_4\hat{b}_2 + r_Ru_4^2\hat{b}_3\]</div>
<p>The remaining accelerations are computed using the analogous two point
relationship utilized for the velocities. The acceleration of the rear frame
center of mass is</p>
<div class="math" id="equation-aCoinN">
<span class="eqno">(35)</span>\[^N\bar{a}^{c_o} = {}^N\bar{a}^{d_o} +
{}^N\bar{\omega}^C\times(^N\bar{\omega}^C\times\bar{r}^{c_o/d_o}) +
{}^N\bar{\alpha}^C\times\bar{r}^{c_o/d_o}\]</div>
<p>where</p>
<div class="math">
\[\begin{split}^N\bar{\omega}^C\times(^N\bar{\omega}^C\times\bar{r}^{c_o/d_o}) =
&amp;(-l_1(u_5+s_4u_3)^2-(s_5u_4+c_4c_5u_3)(l_1(s_5u_4+c_4c_5u_3)-\\
&amp;l_2(c_5u_4-s_5c_4u_3)))\hat{c}_1 +\\
&amp;(u_5+s_4u_3)(l_2(s_5u_4+c_4c_5u_3)+l_1(c_5u_4-s_5c_4u_3))\hat{c}_2 + \\
&amp;((c_5u_4-s_5c_4u_3)(l_1(s_5u_4+c_4c_5u_3)-l_2(c_5u_4-s_5c_4u_3))-\\
&amp;l_2(u_5+s_4u_3)^2)\hat{c}_3\end{split}\]</div>
<p>and</p>
<div class="math">
\[\begin{split}^N\bar{\alpha}^C\times\bar{r}^{c_o/d_o} =
&amp;l_2(c_4u_3u_4+\dot{u}_5+s_4\dot{u}_3)\hat{c}_1 + \\
&amp;(-l_1(s_4c_5u_3u_4+s_5c_4u_3u_5-c_5u_4u_5-s_5\dot{u}_4-c_4c_5\dot{u}_3)-\\
&amp;l_2(s_4s_5u_3u_4+c_5\dot{u}_4-s_5u_4u_5-c_4c_5u_3u_5-s_5c_4\dot{u}_3))\hat{c}_2 - \\
&amp;l_1(c_4u_3u_4+\dot{u}_5+s_4\dot{u}_3)\hat{c}_3\end{split}\]</div>
<p>The acceleration of the steer axis point is</p>
<div class="math" id="equation-aCeInN">
<span class="eqno">(36)</span>\[^N\bar{a}^{c_e} = {}^N\bar{a}^{d_o} +
{}^N\bar{\omega}^C\times(^N\bar{\omega}^C\times\bar{r}^{c_e/d_o}) +
{}^N\bar{\alpha}^C\times\bar{r}^{c_e/d_o}\]</div>
<p>where</p>
<div class="math">
\[\begin{split}^N\bar{\omega}^C\times(^N\bar{\omega}^C\times\bar{r}^{c_e/d_o}) =
&amp;-d_1((u_5+s_4u_3)^2+(s_5u_4+c_4c_5u_3)^2)\hat{c}_1 + \\
&amp;d_1(u_5+s_4u_3)(c_5u_4-s_5c_4u_3)\hat{c}_2 +\\
&amp;d_1(s_5u_4+c_4c_5u_3)(c_5u_4-s_5c_4u_3)\hat{c}_3\end{split}\]</div>
<p>and</p>
<div class="math">
\[\begin{split}^N\bar{\alpha}^C\times\bar{r}^{c_e/d_o} =
&amp;-d_1(s_4c_5u_3u_4+s_5c_4u_3u_5-c_5u_4u_5-
s_5\dot{u}_4-c_4c_5\dot{u}_3)\hat{c}_2 - \\
&amp;d_1(c_4u_3u_4+\dot{u}_5+s_4\dot{u}_3)\hat{c}_3\end{split}\]</div>
<p>The acceleration of the front wheel center of mass is</p>
<div class="math" id="equation-aFoInN">
<span class="eqno">(37)</span>\[^N\bar{a}^{f_o} = {}^N\bar{a}^{c_e} +
{}^N\bar{\omega}^E\times(^N\bar{\omega}^E\times\bar{r}^{f_o/c_e}) +
{}^N\bar{\alpha}^E\times\bar{r}^{f_o/c_e}\]</div>
<p>where</p>
<div class="math">
\[\begin{split}^N\bar{\omega}^E\times(^N\bar{\omega}^E\times\bar{r}^{f_o/c_e}) =
&amp;(-d_3(s_7c_5u_4-c_7u_5-(s_4c_7+s_5s_7c_4)u_3)^2-\\
&amp;(u_7+s_5u_4+c_4c_5u_3)(d_3(u_7+s_5u_4+c_4c_5u_3)-\\
&amp;d_2(s_7u_5+c_5c_7u_4+(s_4s_7-s_5c_4c_7)u_3)))\hat{e}_1 - \\
&amp;(s_7c_5u_4-c_7u_5-(s_4c_7+s_5s_7c_4)u_3)(d_2(u_7+s_5u_4+c_4c_5u_3)+\\
&amp;d_3(s_7u_5+c_5c_7u_4+(s_4s_7-s_5c_4c_7)u_3))\hat{e}_2 + \\
&amp;((s_7u_5+c_5c_7u_4+(s_4s_7-s_5c_4c_7)u_3)(d_3(u_7+s_5u_4+c_4c_5u_3)-\\
&amp;d_2(s_7u_5+c_5c_7u_4+(s_4s_7-s_5c_4c_7)u_3))-\\
&amp;d_2(s_7c_5u_4-c_7u_5-(s_4c_7+s_5s_7c_4)u_3)^2)\hat{e}_3\end{split}\]</div>
<p>and</p>
<div class="math">
\[\begin{split}^N\bar{\alpha}^E\times\bar{r}^{f_o/c_e} =
&amp; -d_2(s_7u_5u_7+c_5c_7u_4u_7+u_3(s_4s_7u_7+s_4s_5s_7u_4-c_4c_7u_4-
s_5c_4c_7u_7-s_7c_4c_5u_5)+\\
&amp; s_7c_5\dot{u}_4-s_5s_7u_4u_5-
c_7\dot{u}_5-(s_4c_7+s_5s_7c_4)\dot{u}_3)\hat{e}_1 + \\
&amp; (d_2(s_5c_7u_4u_5+s_7c_5u_4u_7-c_7u_5u_7-
u_3(s_4c_7u_7+s_7c_4u_4+s_4s_5c_7u_4+s_5s_7c_4u_7-\\
&amp; c_4c_5c_7u_5)-s_7\dot{u}_5-
c_5c_7\dot{u}_4-(s_4s_7-s_5c_4c_7)\dot{u}_3)-\\
&amp; d_3(s_4c_5u_3u_4+s_5c_4u_3u_5-c_5u_4u_5-\dot{u}_7-
s_5\dot{u}_4-c_4c_5\dot{u}_3))\hat{e}_2 + \\
&amp; d_3(s_7u_5u_7+c_5c_7u_4u_7+u_3(s_4s_7u_7+s_4s_5s_7u_4-c_4c_7u_4-
s_5c_4c_7u_7-s_7c_4c_5u_5)+\\
&amp; s_7c_5\dot{u}_4-
s_5s_7u_4u_5-c_7\dot{u}_5-(s_4c_7+s_5s_7c_4)\dot{u}_3)\hat{e}_3\end{split}\]</div>
<p>The acceleration of the front frame center of mass is</p>
<div class="math" id="equation-aEoInN">
<span class="eqno">(38)</span>\[^N\bar{a}^{e_o} = {}^N\bar{a}^{f_o} +
{}^N\bar{\omega}^E\times(^N\bar{\omega}^E\times\bar{r}^{e_o/f_o}) +
{}^N\bar{\alpha}^E\times\bar{r}^{e_o/f_o}\]</div>
<p>where</p>
<div class="math">
\[\begin{split}^N\bar{\omega}^E\times(^N\bar{\omega}^E\times\bar{r}^{e_o/f_o}) =
&amp;(-(d_3+l_3)(s_7c_5u_4-c_7u_5-(s_4c_7+s_5s_7c_4)u_3)^2-\\
&amp;(u_7+s_5u_4+c_4c_5u_3)((d_3+l_3)(u_7+s_5u_4+c_4c_5u_3)-\\
&amp;d_2(s_7u_5+c_5c_7u_4+(s_4s_7-s_5c_4c_7)u_3)-\\
&amp;l_4(s_7u_5+c_5c_7u_4+(s_4s_7-s_5c_4c_7)u_3)))\hat{e}_1 - \\
&amp;(s_7c_5u_4-c_7u_5-(s_4c_7+s_5s_7c_4)u_3)((d_2+l_4)(u_7+s_5u_4+
c_4c_5u_3)+\\
&amp;(d_3+l_3)(s_7u_5+c_5c_7u_4+(s_4s_7-s_5c_4c_7)u_3))\hat{e}_2+ \\
&amp;((s_7u_5+c_5c_7u_4+(s_4s_7-s_5c_4c_7)u_3)((d_3+l_3)(u_7+s_5u_4+c_4c_5u_3)-\\
&amp;d_2(s_7u_5+c_5c_7u_4+(s_4s_7-s_5c_4c_7)u_3)-\\
&amp;l_4(s_7u_5+c_5c_7u_4+(s_4s_7-s_5c_4c_7)u_3))-\\
&amp;(d_2+l_4)(s_7c_5u_4-c_7u_5-(s_4c_7+s_5s_7c_4)u_3)^2)\hat{e}_3\end{split}\]</div>
<p>and</p>
<div class="math">
\[\begin{split}^N\bar{\alpha}^E\times\bar{r}^{e_o/f_o} =
&amp; -(d_2+l_4)(s_7u_5u_7+c_5c_7u_4u_7+u_3(s_4s_7u_7+s_4s_5s_7u_4-c_4c_7u_4-
s_5c_4c_7u_7-\\
&amp;s_7c_4c_5u_5)+s_7c_5\dot{u}_4-s_5s_7u_4u_5-c_7\dot{u}_5-
(s_4c_7+s_5s_7c_4)\dot{u}_3)\hat{e}_1+ \\
&amp; (d_2(s_5c_7u_4u_5+s_7c_5u_4u_7-c_7u_5u_7-u_3(s_4c_7u_7+s_7c_4u_4+
s_4s_5c_7u_4+s_5s_7c_4u_7-\\
&amp;c_4c_5c_7u_5)-s_7\dot{u}_5-
c_5c_7\dot{u}_4-
(s_4s_7-s_5c_4c_7)\dot{u}_3)+l_4(s_5c_7u_4u_5+s_7c_5u_4u_7-c_7u_5u_7-\\
&amp; u_3(s_4c_7u_7+s_7c_4u_4+s_4s_5c_7u_4+s_5s_7c_4u_7-c_4c_5c_7u_5)-
s_7\dot{u}_5-\\
&amp; c_5c_7\dot{u}_4-(s_4s_7-s_5c_4c_7)\dot{u}_3)-
(d_3+l_3)(s_4c_5u_3u_4+s_5c_4u_3u_5-c_5u_4u_5-\\
&amp;\dot{u}_7-s_5\dot{u}_4-c_4c_5\dot{u}_3))\hat{e}_2 + \\
&amp; (d_3+l_3)(s_7u_5u_7+c_5c_7u_4u_7+u_3(s_4s_7u_7+s_4s_5s_7u_4-c_4c_7u_4-
s_5c_4c_7u_7-\\
&amp;s_7c_4c_5u_5)+s_7c_5\dot{u}_4-
s_5s_7u_4u_5-c_7\dot{u}_5-
(s_4c_7+s_5s_7c_4)\dot{u}_3)\hat{e}_3\end{split}\]</div>
</div>
<div class="section" id="motion-constraints">
<span id="nonholonomic"></span><h3>Motion Constraints<a class="headerlink" href="#motion-constraints" title="Permalink to this headline">¶</a></h3>
<p>Motion constraints reduce the dimensions of the locally achievable
configuration space from nine to three. The first four constraints are
introduced to enforce the pure rolling, no side-slip, contact of the knife-edge
wheels with the ground plane and are nonholonomic. This sets the components of
velocity of the contact points on the wheels in the <span class="math">\(\hat{a}_1\)</span> and
<span class="math">\(\hat{a}_2\)</span> directions equal to zero, producing the following
relationships</p>
<div class="math" id="equation-eqNonholonomic1">
<span class="eqno">(39)</span>\[^N\bar{v}^{d_n}\cdot\hat{a}_1 = s_3u_2 + c_3u_1 + r_R(u_5+u_6) = 0\]</div>
<div class="math" id="equation-eqNonholonomic2">
<span class="eqno">(40)</span>\[^N\bar{v}^{d_n}\cdot\hat{a}_2 = c_3u_2 - s_3u_1 = 0\]</div>
<div class="math" id="equation-eqNonholonomic3">
<span class="eqno">(41)</span>\[\begin{split}^N\bar{v}^{f_n}\cdot\hat{a}_1 =
&amp; s_3u_2 + c_3u_1 + d_2c_5u_5 + d_2s_4c_5u_3 - r_Rs_4u_3 -
d_3s_7c_4u_3 - d_1s_5(u_5+s_4u_3)\\
&amp; r_F c_4c_7(u_8+c_7u_5+
(s_4c_7+s_5s_7c_4)u_3)/(c_4^2c_5^2+(s_4s_7-s_5c_4c_7)^2)^{1/2} -\\
&amp; s_7c_5(d_3u_7-
r_F (s_7c_4c_5u_5-(s_4s_7-s_5c_4c_7)u_7)/(c_4^2c_5^2+(s_4s_7-s_5c_4c_7)^2)^{1/2}) - \\
&amp;s_5(d_3c_7(u_5+s_4u_3)+r_Fs_4s_7(u_8+c_7u_5+(s_4c_7+
s_5s_7c_4)u_3)/(c_4^2c_5^2+\\
&amp;(s_4s_7-s_5c_4c_7)^2)^{1/2}) = 0\end{split}\]</div>
<div class="math" id="equation-eqNonholonomic4">
<span class="eqno">(42)</span>\[\begin{split}^N\bar{v}^{f_n}\cdot\hat{a}_2 =
&amp;c_3u_2 + d_1c_5u_3 + r_Rc_4u_4 + d_1s_4c_5u_5 + d_1s_5c_4u_4 +\\
&amp;(c_4c_7-s_4s_5s_7)(d_3(u_7+s_5u_4+c_4c_5u_3)-\\
&amp;d_2(s_7u_5+c_5c_7u_4+(s_4s_7-s_5c_4c_7)u_3)-r_F(c_4c_7u_4+
s_7c_4c_5u_5-s_4s_5s_7u_4-\\
&amp;(s_4s_7-s_5c_4c_7)u_7)/(c_4^2c_5^2+(s_4s_7-s_5c_4c_7)^2)^{1/2}) - \\
&amp;s_3u_1 - (s_7c_4+s_4s_5c_7)(d_2(s_7c_5u_4-c_7u_5-(s_4c_7+s_5s_7c_4)u_3)+\\
&amp;r_Fc_4c_5(s_7c_5u_4-u_8-c_7u_5-(s_4c_7+s_5s_7c_4)u_3)/(c_4^2c_5^2+(s_4s_7-s_5c_4c_7)^2)^{1/2}) - \\
&amp;s_4c_5(d_3(s_7c_5u_4-c_7u_5-(s_4c_7+s_5s_7c_4)u_3)+\\
&amp;r_F(s_4s_7-s_5c_4c_7)(s_7c_5u_4-u_8-c_7u_5-\\
&amp;(s_4c_7+s_5s_7c_4)u_3)/(c_4^2c_5^2+(s_4s_7-s_5c_4c_7)^2)^{1/2}) = 0\end{split}\]</div>
<p>The fifth motion constraint is used to enforce the constraint on the velocities
imposed by the holonomic constraint, Equation <a href="#equation-eqHolonomicConstraint">(14)</a>. This
is strictly introduced to ease numerical integration and linearization. By
differentiating the holonomic constraint equation we arrive at an equation that
is linear in the generalized speeds and can be treated as any other motion
constraint</p>
<div class="math" id="equation-eqHolonomicDerivative">
<span class="eqno">(43)</span>\[\begin{split}\frac{d}{dt}(\bar{r}^{G_n/d_n}\cdot\hat{a}_3) =
&amp;r_Rs_4u_4 + d_1s_4s_5u_4 + (d_3+r_F(s_4s_7-s_5c_4c_7)/(c_4^2c_5^2+
(s_4s_7-s_5c_4c_7)^2)^{1/2})\\
&amp;(s_4c_7u_7+s_7c_4u_4+s_4s_5c_7u_4+s_5s_7c_4u_7-c_4c_5c_7u_5) -
d_1c_4c_5u_5 - \\
&amp;d_2s_4c_5u_4 -d_2s_5c_4u_5 -
r_Fc_4c_5(s_4c_4^2c_5^3u_4+s_5c_4^3c_5^2u_5+\\
&amp;(s_4s_7-s_5c_4c_7)^2(s_4c_5u_4+s_5c_4u_5))/(c_4^2c_5^2+(s_4s_7-s_5c_4c_7)^2)^{1.5} = 0\end{split}\]</div>
<p>These five equations are linear in the eight generalized speeds. Following
convention, I choose the roll rate, <span class="math">\(u_4\)</span>, the rear wheel rate,
<span class="math">\(u_6\)</span>, and steer rate, <span class="math">\(u_7\)</span>, as independent generalized speeds.</p>
<p>Now we calculate the dependent speeds as functions of the independent speeds by
solving the linear system of equations and differentiating the resulting
equations to find the dependent <span class="math">\(\dot{u}\)</span>&#8216;s. The dependent speeds take
the form</p>
<div class="math" id="equation-eqDependentSpeeds">
<span class="eqno">(44)</span>\[u_1 = f(u_4, u_6, u_7, q_3, \ldots, q_8)\]\[u_2 = f(u_4, u_6, u_7, q_3, \ldots, q_8)\]\[u_3 = f(u_4, u_6, u_7, q_4, \ldots, q_8)\]\[u_5 = f(u_4, u_7, q_4, \ldots, q_8)\]\[u_8 = f(u_4, u_6, u_7, q_4, \ldots, q_8)\]</div>
<p>At this point, the equations become analytically long and it is not necessarily
trivial to reduce the length of the equations. A smarter choice of generalized
speeds could certainly help, but no effort was spent searching for a good set.
From this point on in the derivation, the analytical results of the equations
of motion will not be shown. I will only outline the remainder of the theory,
as all of the kinematical building blocks are in place to derive the equations
with Kane&#8217;s method (or any other method). I highly recommend the use of
computer aided algebra to continue on, but the die-hard could certainly write
them by hand.</p>
</div>
<div class="section" id="generalized-active-forces">
<h3>Generalized Active Forces<a class="headerlink" href="#generalized-active-forces" title="Permalink to this headline">¶</a></h3>
<p>The three expressions for the nonholomonic generalized active forces,
<span class="math">\(\tilde{F}_r\)</span> can now be formed. For the four body system with three
degrees of freedom <span class="math">\((r=4,6,7)\)</span> they take the form</p>
<div class="math" id="equation-eqTotalGeneralizedActiveForces">
<span class="eqno">(45)</span>\[\tilde{F}_r = (\tilde{F}_r)_C + (\tilde{F}_r)_D + (\tilde{F}_r)_E +
(\tilde{F}_r)_F\]\[(\bar{F}_r)_X= {}^N\bar{V}^{x_o}_r\cdot\bar{R}^{x_o} +
{}^N\bar{\omega}^X_r\cdot\bar{T}^X\]</div>
<p>where <span class="math">\(^N\bar{V}_r^{x_o}\)</span> is the r<sup>th</sup> partial velocity of the
mass center corresponding to the generalized speed <span class="math">\(u_r\)</span>,
<span class="math">\(\bar{R}^{x_o}\)</span> is the resultant force on the mass center (excluding
non-contributing forces), <span class="math">\(^N\bar{\omega}_r^X\)</span> is the r<sup>th</sup>
partial angular velocity of the body corresponding to the generalized speed
<span class="math">\(u_r\)</span>, and <span class="math">\(\bar{T}^X\)</span> is the resultant torques on the body where
<span class="math">\(X\)</span> is one of the four bodies. The partial velocities are simply the
partial derivative of the velocities in question with respect to the
generalized speeds and can be found systematically <a class="reference internal" href="zreferences.html#kane1985">[KL85]</a>. We assume that
the only contributing force acting on the system is the gravitational force,
<span class="math">\(g\)</span>. The resultant forces are</p>
<div class="math" id="equation-eqContributingForces">
<span class="eqno">(46)</span>\[\bar{R}^{c_o} = m_Cg\hat{n}_3\]\[\bar{R}^{d_o} = m_Dg\hat{n}_3\]\[\bar{R}^{e_o} = m_Eg\hat{n}_3\]\[\bar{R}^{f_o} = m_Fg\hat{n}_3\]</div>
<p>We also assume that three generalized active torques act on the system which
correspond to the three independent generalized speeds found in Section
<a class="reference internal" href="#nonholonomic"><em>Motion Constraints</em></a>.</p>
<p>The roll torque, <span class="math">\(T_4\)</span>, acts between the rear frame and the Newtonian
frame about <span class="math">\(\hat{a}_1\)</span>. The rear wheel torque, <span class="math">\(T_6\)</span>, acts between
the rear frame and the rear wheel about <span class="math">\(\hat{c}_2\)</span> and the steer torque,
<span class="math">\(T_7\)</span>, acts between the rear frame and the front frame about
<span class="math">\(\hat{c}_3\)</span>.</p>
<div class="math" id="equation-eqContributingTorques">
<span class="eqno">(47)</span>\[\bar{T}^C = T_4\hat{a}_1-T_6\hat{c}_2-T_7\hat{c}_3\]\[\bar{T}^D = T_6\hat{c}_2\]\[\bar{T}^E = T_7\hat{c}_3\]\[\bar{T}^F = 0\]</div>
</div>
<div class="section" id="generalized-inertia-forces">
<h3>Generalized Inertia Forces<a class="headerlink" href="#generalized-inertia-forces" title="Permalink to this headline">¶</a></h3>
<p>The nonholonomic generalized inertia forces, <span class="math">\(\tilde{F}^*_r\)</span>, are formed
using the accelerations and the inertial properties of the bodies.</p>
<div class="math" id="equation-eqTotalGeneralizedInertiaForces">
<span class="eqno">(48)</span>\[\tilde{F}^*_r = (\tilde{F}^*_r)_C + (\tilde{F}^*_r)_D + (\tilde{F}^*_r)_E +
(\tilde{F}^*_r)_F\]\[(\bar{F}^*_r)_X= {}^N\bar{V}^{X_o}_r\cdot\bar{R}^*_{X_o} +
{}^N\bar{\omega}^X_r\cdot\bar{T}^*_X\]</div>
<p>where <span class="math">\(^N\bar{V}_r^{x_o}\)</span> is once again the r<sup>th</sup> partial velocity
of the mass center with corresponding to the generalized speed <span class="math">\(u_r\)</span>,
<span class="math">\(\bar{R}^*_{x_o}\)</span> is the inertia force for body <span class="math">\(X\)</span> in frame
<span class="math">\(N\)</span> and is defined as</p>
<div class="math" id="equation-eqRStar">
<span class="eqno">(49)</span>\[\bar{R}^*_{x_o} = -m_X\ ^N\bar{a}^{x_o}\]</div>
<p>where the mass of each rigid body is a constant (<span class="math">\(m_C\)</span>, <span class="math">\(m_D\)</span>,
<span class="math">\(m_E\)</span> and <span class="math">\(m_F\)</span>) which is multiplied by the acceleration of the
body&#8217;s center of mass. <span class="math">\(^N\bar{\omega}_r^X\)</span> is the partial angular
velocity of the body corresponding to <span class="math">\(u_r\)</span>, and <span class="math">\(\bar{T}^*_X\)</span> is
the inertia torque on the body and is defined as</p>
<div class="math" id="equation-eqTStar">
<span class="eqno">(50)</span>\[\bar{T}^*_X =
-(^N\bar{\alpha}^X\cdot I_X+{}^N\bar{\omega}^X\times I_X\cdot\bar{\omega}^X)\]</div>
<p>where <span class="math">\(I_X\)</span> is the central inertia dyadic for the body in question which
corresponds to the following tensor definitions for the inertia of each rigid
body. The inertia tensor for each body is defined with respect to the mass
center and the body&#8217;s local reference frame. The bicycle wheels are assumed to
be symmetric about both their 1-3 and 1-2 planes.</p>
<div class="math" id="equation-ID">
<span class="eqno">(51)</span>\[\begin{split}\mathbf{I}_D =
\begin{bmatrix}
I_{D11} &amp; 0 &amp; 0\\
0 &amp; I_{D22} &amp; 0\\
0 &amp; 0 &amp; I_{D11}
\end{bmatrix}\end{split}\]</div>
<div class="math" id="equation-IF">
<span class="eqno">(52)</span>\[\begin{split}\mathbf{I}_F =
\begin{bmatrix}
I_{F11} &amp; 0 &amp; 0\\
0 &amp; I_{F22} &amp; 0\\
0 &amp; 0 &amp; I_{F11}
\end{bmatrix}\end{split}\]</div>
<p>The rear frame and front frame are assumed to be symmetric about their 1-3 planes.</p>
<div class="math" id="equation-IC">
<span class="eqno">(53)</span>\[\begin{split}\mathbf{I}_C =
\begin{bmatrix}
I_{C11} &amp; 0 &amp; I_{C13}\\
0 &amp; I_{C22} &amp; 0\\
I_{C13} &amp; 0 &amp; I_{C33}
\end{bmatrix}\end{split}\]</div>
<div class="math" id="equation-IE">
<span class="eqno">(54)</span>\[\begin{split}\mathbf{I}_E =
\begin{bmatrix}
I_{E11} &amp; 0 &amp; I_{E13}\\
0 &amp; I_{E22} &amp; 0\\
I_{E13} &amp; 0 &amp; I_{E33}
\end{bmatrix}\end{split}\]</div>
</div>
<div class="section" id="dynamical-equations-of-motion">
<h3>Dynamical Equations of Motion<a class="headerlink" href="#dynamical-equations-of-motion" title="Permalink to this headline">¶</a></h3>
<p>Kane&#8217;s equations are</p>
<div class="math">
\[\tilde{F}_r + \tilde{F}^*_r = 0 \qquad r=4,6,7\]</div>
<p>and are a vector function of three coupled equations which are linear in the
roll, steer, and rear wheel accelerations. The linear system can be solved to
give the first order equations for <span class="math">\(\dot{u}_r\)</span>, where <span class="math">\(r=4,6,7\)</span>.
These can then be  paired with the essential kinematical differential equations
to form the complete set of dynamic equations of motion in the form</p>
<div class="math">
\[\dot{u}_i=f_i(u_4, u_6, u_7, q_4, q_5, q_7)\]\[\dot{q}_j=u_j\]</div>
<p>where <span class="math">\(i=4,6,7\)</span> and <span class="math">\(j=4,5,6,7\)</span>. Keep in mind that the pitch angle,
<span class="math">\(q_5\)</span>, is in fact a dependent coordinate, <span class="math">\(q_5=f(q_4,q_7)\)</span>,
selected when dealing with the holonomic constraint,
<a href="#equation-eqHolonomicConstraint">(14)</a>. Special attention during simulation and
linearization will have to be paid to accommodate the coordinate and will be
described in the following sections.</p>
</div>
<div class="section" id="model-discussion">
<h3>Model discussion<a class="headerlink" href="#model-discussion" title="Permalink to this headline">¶</a></h3>
<p><a class="reference internal" href="zreferences.html#astrom2005">[ASKL05]</a>, <a class="reference internal" href="zreferences.html#meijaard2007">[MPRS07]</a>, <a class="reference internal" href="zreferences.html#basu-mandal2007">[BMCP07]</a>,
<a class="reference internal" href="zreferences.html#limebeer2006">[LS06]</a>, and others do excellent jobs describing the essential
nature of both the non-linear Whipple model and various linearized models.
Notable concepts include the fact that many of the coordinates are <em>ignorable</em>,
that is they do not show up in the essential dynamical equations of motion.
These are typically the location of the ground contact point, <span class="math">\(q_1\)</span> and
<span class="math">\(q_2\)</span>, the yaw angle, <span class="math">\(q_3\)</span>, and the wheel angles, <span class="math">\(q_6\)</span> and
<span class="math">\(q_8\)</span>. The model is also energy conserving, because the contact points do
no work. The model has many equilibrium points and when linearized about the
nominal configuration at constant forward speed the open loop model (i.e. with
no inputs) can exhibit stability within various speed regimes. The system
exhibits non-minimum phase behavior and this is clearly identified in the
linear models by the right half plane zeros in various transfer functions. The
previously mentioned references are recommended for a more detailed description
of the model.</p>
</div>
<div class="section" id="simulation">
<h3>Simulation<a class="headerlink" href="#simulation" title="Permalink to this headline">¶</a></h3>
<p>The non-linear model can be simulated with various initial conditions. In the
presented formulation all initial conditions can be set independently except
for the roll, steer, and pitch angles. Once two of the three are chosen, the
third is determined. Typically one chooses a steer and roll angle and then
solves the holonomic constraint equation numerically for the pitch angle,
<span class="math">\(q_5\)</span>, to provide the correct initial condition. <a class="reference internal" href="#figfigfour"><em>Figure
3.4</em></a> is an example open loop simulation of the non-linear model.</p>
<div class="figure align-center" id="figfigfour">
<a class="reference external image-reference" href="_images/meijaard2007-figure-four.png"><img alt="_images/meijaard2007-figure-four.png" src="_images/meijaard2007-figure-four.png" style="width: 3in;" /></a>
<p class="caption">A reproduction of Figure 4 from <a class="reference internal" href="zreferences.html#meijaard2007">[MPRS07]</a>. For these initial
conditions the model demonstrates stability. It also shows the energy
conserving nature of the non-linear model (i.e. the forward speed settles to
a higher value than the initial speed as the energy associated with lateral
motion is transferred to the forward speed). Generated by
<cite>src/eom/nonlinear_simulation.py</cite>.</p>
</div>
</div>
<div class="section" id="non-linear-validation">
<h3>Non-linear Validation<a class="headerlink" href="#non-linear-validation" title="Permalink to this headline">¶</a></h3>
<p>It is often difficult to validate that two independently derived multibody
dynamical systems are equivalent. This due to mostly to the complexity of large
analytical expressions which can be derived by different methodologies. A
common method of validation is to evaluate the symbolic equations numerically
for non-trivial inputs and compare the results to high precision. These type of
numerical benchmarks are invaluable. They provide a baseline for model
comparison allowing for scientific reproducibility and error checking.</p>
<p><a class="reference internal" href="zreferences.html#basu-mandal2007">[BMCP07]</a> present the non-linear Whipple model derived with both the
Newton-Euler and Lagrange methods, along with a numerical benchmark. Table 1 in
their paper gives the derivatives of all the coordinates and speeds to high
precision for both of their derivations at a single state. They claim that if
one can compute the values to machine precision to ~10 significant figures then
the models can be concluded to be the same<a class="footnote-reference" href="#validity" id="id34">[8]</a>.</p>
<p>The Basu-Mandal et al. derivations are based on different coordinates than
those used here, but regardless of the coordinates they provide numerical
values which can be benchmarked if the correct coordinate transformations are
applied<a class="footnote-reference" href="#eqconv" id="id35">[9]</a>. In <a class="reference internal" href="#tabnonlinvalidation"><em>Table 3.1</em></a><a class="footnote-reference" href="#nonlincompare" id="id36">[11]</a>
I present the values computed from the present model in comparison to the
values presented in <a class="reference internal" href="zreferences.html#basu-mandal2007">[BMCP07]</a>. I&#8217;ve presented the same number of
significant digits as provided by Basu-Mandall for each variable<a class="footnote-reference" href="#sigfig" id="id38">[10]</a>.
My model produces the same result to at least eleven significant figures, thus
verifying the derivation is correct.</p>
<table border="1" class="docutils">
<caption>Nonlinear Whipple Model Comparision</caption>
<colgroup>
<col width="33%" />
<col width="33%" />
<col width="33%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Variable</th>
<th class="head">Basu-Mandal</th>
<th class="head">Moore</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><span class="math">\(\beta_f\)</span></td>
<td>0</td>
<td>0</td>
</tr>
<tr class="row-odd"><td><span class="math">\(\dot{\beta_f}\)</span></td>
<td>8.0133620584155</td>
<td>8.0133620584154</td>
</tr>
<tr class="row-even"><td><span class="math">\(\ddot{\beta_f}\)</span></td>
<td>2.454807290455</td>
<td>2.454807290455</td>
</tr>
<tr class="row-odd"><td><span class="math">\(\beta_r\)</span></td>
<td>0</td>
<td>0</td>
</tr>
<tr class="row-even"><td><span class="math">\(\dot{\beta_r}\)</span></td>
<td>8.912989661489</td>
<td>8.912989661489</td>
</tr>
<tr class="row-odd"><td><span class="math">\(\ddot{\beta_r}\)</span></td>
<td>1.8472554144217</td>
<td>1.8472554144220</td>
</tr>
<tr class="row-even"><td><span class="math">\(\phi\)</span></td>
<td>3.1257073014894</td>
<td>3.1257073014894</td>
</tr>
<tr class="row-odd"><td><span class="math">\(\dot{\phi}\)</span></td>
<td>-1.19185528069e-02</td>
<td>-1.19185528069e-02</td>
</tr>
<tr class="row-even"><td><span class="math">\(\ddot{\phi}\)</span></td>
<td>1.205543897884e-01</td>
<td>1.205543897886e-01</td>
</tr>
<tr class="row-odd"><td><span class="math">\(\psi\)</span></td>
<td>9.501292851472e-01</td>
<td>9.501292851472e-01</td>
</tr>
<tr class="row-even"><td><span class="math">\(\dot{\psi}\)</span></td>
<td>6.068425835418e-01</td>
<td>6.068425835418e-01</td>
</tr>
<tr class="row-odd"><td><span class="math">\(\ddot{\psi}\)</span></td>
<td>-7.8555281128244</td>
<td>-7.8555281128245</td>
</tr>
<tr class="row-even"><td><span class="math">\(\psi_f\)</span></td>
<td>2.311385135743e-01</td>
<td>2.311385135743e-01</td>
</tr>
<tr class="row-odd"><td><span class="math">\(\dot{\psi_f}\)</span></td>
<td>4.859824687093e-01</td>
<td>4.859824687093e-01</td>
</tr>
<tr class="row-even"><td><span class="math">\(\ddot{\psi_f}\)</span></td>
<td>-4.6198904039403</td>
<td>-4.6198904039394</td>
</tr>
<tr class="row-odd"><td><span class="math">\(\theta\)</span></td>
<td>0</td>
<td>0</td>
</tr>
<tr class="row-even"><td><span class="math">\(\dot{\theta}\)</span></td>
<td>7.830033527065e-01</td>
<td>7.830033527065e-01</td>
</tr>
<tr class="row-odd"><td><span class="math">\(\ddot{\theta}\)</span></td>
<td>8.353281706379e-01</td>
<td>8.353281706377e-01</td>
</tr>
<tr class="row-even"><td><span class="math">\(x\)</span></td>
<td>0</td>
<td>0</td>
</tr>
<tr class="row-odd"><td><span class="math">\(\dot{x}\)</span></td>
<td>-2.8069345714545</td>
<td>-2.8069345714545</td>
</tr>
<tr class="row-even"><td><span class="math">\(\ddot{x}\)</span></td>
<td>-5.041626315047e-01</td>
<td>-5.041626315048e-01</td>
</tr>
<tr class="row-odd"><td><span class="math">\(y\)</span></td>
<td>0</td>
<td>0</td>
</tr>
<tr class="row-even"><td><span class="math">\(\dot{y}\)</span></td>
<td>-1.480982396001e-01</td>
<td>-1.480982396001e-01</td>
</tr>
<tr class="row-odd"><td><span class="math">\(\ddot{y}\)</span></td>
<td>-3.449706619454e-01</td>
<td>-3.449706619455e-01</td>
</tr>
<tr class="row-even"><td><span class="math">\(z\)</span></td>
<td>2.440472102925e-01</td>
<td>2.440472102925e-01</td>
</tr>
<tr class="row-odd"><td><span class="math">\(\dot{z}\)</span></td>
<td>1.058778746261e-01</td>
<td>1.058778746261e-01</td>
</tr>
<tr class="row-even"><td><span class="math">\(\ddot{z}\)</span></td>
<td>-1.460452833298</td>
<td>-1.460452833298</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="linearized-equations-of-motion">
<h2>Linearized Equations of Motion<a class="headerlink" href="#linearized-equations-of-motion" title="Permalink to this headline">¶</a></h2>
<p>The non-linear equations of motion can be linearized about various equilibrium
points. The obvious one is about the nominal configuration <a class="reference internal" href="zreferences.html#meijaard2007">[MPRS07]</a> but
there are are an infinity of other associated with steady turns
<a class="reference internal" href="zreferences.html#basu-mandal2007">[BMCP07]</a>. The equations can be linearized by computing the Taylor
series expansion of the non-linear equations of motion about the equilibrium
point of interest and disregarding the terms higher than first order. For the
nominal configuration, this amounts to calculating the Jacobian of the system
of equations with respect to the coordinates, speeds, and inputs to obtain the
state matrix, <span class="math">\(\mathbf{A}\)</span>, and the input matrix, <span class="math">\(\mathbf{B}\)</span>.
Output, <span class="math">\(\mathbf{C}\)</span>, and feed-forward, <span class="math">\(\mathbf{D}\)</span>,  matrices are
computed in the same fashion from the non-linear equations of the desired
outputs. The partial derivatives of each equation were evaluated at the
following fixed point: <span class="math">\(q_i=0\)</span> where <span class="math">\(i=4,5,7\)</span>, <span class="math">\(u_i=0\)</span> where
<span class="math">\(i=4,7\)</span>, and <span class="math">\(u_5=-v/r_R\)</span> where <span class="math">\(v\)</span> is the magnitude of the
component of velocity of the rear wheel center in the direction of travel. Care
has to be taken when linearizing as <span class="math">\(q_5\)</span> is a dependent coordinate which
still appears on the right hand side of the equations. In general, the chain
rule applies, but for the nominal configuration, the terms due to the implicit
definition of pitch equal zero. The linearization transforms the system into
four linear first order differential equations in the form</p>
<div class="math" id="equation-eqStateSpace">
<span class="eqno">(55)</span>\[\begin{split}\begin{bmatrix}
  \dot{q_4}\\
  \dot{q_7}\\
  \dot{u_4}\\
  \dot{u_7}
\end{bmatrix}
= \mathbf{A}
\begin{bmatrix}
  q_4\\
  q_7\\
  u_4\\
  u_7
\end{bmatrix}
+ \mathbf{B}
\begin{bmatrix}
  T_4\\
  T_7
\end{bmatrix}\end{split}\]</div>
<p>I calculate the equations symbolically to reach the same results presented in
<a class="reference internal" href="zreferences.html#meijaard2007">[MPRS07]</a>, but my equations are much lengthier because the simplification
routines available in Autolev and SymPy where not that effective.
<a class="reference internal" href="zreferences.html#meijaard2007">[MPRS07]</a> assumes linearity in their derivation from the start of the
derivation and avoids many of the simplification issues. The accuracy of the
linearized model was checked by comparing the numerical results to the
benchmark bicycle in two ways. First the linearized equations of motion,
Equation <a href="#equation-eqStateSpace">(55)</a>, were rearranged into two second order differential
equations in the canonical form (Equation <a href="#equation-eqCanonical">(56)</a>) presented in
<a class="reference internal" href="zreferences.html#meijaard2007">[MPRS07]</a>. They present the values for the coefficient matrices
(<span class="math">\(\mathbf{M}\)</span>, <span class="math">\(\mathbf{C}_1\)</span>, <span class="math">\(\mathbf{K}_0\)</span> and
<span class="math">\(\mathbf{K}_2\)</span>) for the benchmark parameter set to at least 13
significant figures and the linearization presented here matched all of the
significant figures. <a class="reference internal" href="zreferences.html#meijaard2007">[MPRS07]</a> also provide the eigenvalues of the state
matrix at various speeds. <a class="reference internal" href="#tablincompare"><em>Table 3.2</em></a><a class="footnote-reference" href="#lincompare" id="id45">[12]</a> shows
the eigenvalues computed at 5 m/s compared to the values in Table 2 of
<a class="reference internal" href="zreferences.html#meijaard2007">[MPRS07]</a>. These match to at least 13 significant figures.</p>
<div class="math" id="equation-eqCanonical">
<span class="eqno">(56)</span>\[\mathbf{M}\ddot{\bar{q}} + v\mathbf{C}_1\dot{\bar{q}} +
\left[ g \mathbf{K}_0 + v^2 \mathbf{K}_2 \right] \bar{q} = 0\]\[\bar{q} = [\phi \quad \delta]^T = [q_4 \quad q_7]^T\]</div>
<table border="1" class="docutils">
<caption>Linear Whipple Model Comparision</caption>
<colgroup>
<col width="20%" />
<col width="20%" />
<col width="20%" />
<col width="20%" />
<col width="20%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Model</th>
<th class="head">Caster</th>
<th class="head">Weave Real</th>
<th class="head">Capsize</th>
<th class="head">Weave Imaginary</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Meijaard</td>
<td>-1.407838969279822e+01</td>
<td>-7.7534188219585e-01</td>
<td>-3.2286642900409e-01</td>
<td>4.46486771378823e+00</td>
</tr>
<tr class="row-odd"><td>Moore</td>
<td>-1.407838969279825e+01</td>
<td>-7.7534188219584e-01</td>
<td>-3.2286642900409e-01</td>
<td>4.46486771378822e+00</td>
</tr>
</tbody>
</table>
<p>The lateral dynamics of this linear model are remarkably similar to the
non-linear model especially around the regime of a typical bicycle&#8217;s operating
point. <a class="reference internal" href="#figlinsim"><em>Figure 3.5</em></a> gives an example simulation with the same
initial conditions as the  <a class="reference internal" href="#figfigfour"><em>Figure 3.4</em></a>. Notice that the
lateral dynamics, steer and roll, are almost identical, but that the constant
forward speed equilibrium condition destroys the conservative property
demonstrated in the non-linear model.</p>
<div class="figure align-center" id="figlinsim">
<a class="reference external image-reference" href="_images/meijaard2007-figure-four-linear.png"><img alt="_images/meijaard2007-figure-four-linear.png" src="_images/meijaard2007-figure-four-linear.png" style="width: 3in;" /></a>
<p class="caption">Simulation of the linear model given the same initial conditions as
<a class="reference internal" href="#figfigfour"><em>Figure 3.4</em></a>. Generated by <tt class="docutils literal"><span class="pre">src/eom/linear_comparison.py</span></tt>.</p>
</div>
<p>It turns out that speed has profound effect on the lateral dynamics of the
bicycle. It is useful to plot the root locus, <a class="reference internal" href="#figrootlocus"><em>Figure 3.6</em></a>,
of the characteristic equation with respect to the change in the equilibrium
forward speed to visualize the time constants, damping, frequency, and
stability of each of the modes of motion. The modes can be clearly identified
along with the speed dependent stability.</p>
<div class="figure align-center" id="figrootlocus">
<a class="reference external image-reference" href="_images/root-locus-complex.png"><img alt="_images/root-locus-complex.png" src="_images/root-locus-complex.png" style="width: 5in;" /></a>
<p class="caption">The root locus with respect to forward speed. The color variation signifies
speed as shown in the right side color bar. Two eigenvalues are real, one
being stable but increasingly fast and the other slowing to a marginally
unstable location at high speed. The other two are initially real and
unstable, but these coalesce into a complex pair and eventually become
stable, at a higher moderately well damped frequency. Generated by
<cite>src/eom/linear_comparison.py</cite>.</p>
</div>
<p>Another useful and popular way to visualize the root locus is by plotting the
real and imaginary eigenvalue components separately versus forward speed,
<a class="reference internal" href="#figeigenvalues"><em>Figure 3.7</em></a>. This view gives a clearer view of the stable
speed range.</p>
<div class="figure align-center" id="figeigenvalues">
<a class="reference external image-reference" href="_images/root-locus.png"><img alt="_images/root-locus.png" src="_images/root-locus.png" style="width: 5in;" /></a>
<p class="caption">The real (solid) and imaginary (dashed) eigenvalue components versus speed
for an example parameter set. The four modes of motion are identified.
<em>Caster</em> is stable and real for all positive values of speed. It describes
the tendency for the front wheel to right itself in forward motion.
<em>Capsize</em> is always real and stable at low speeds but becomes marginally
unstable at a higher speed. It describes the roll of the rear frame. <em>Weave</em>
is real at very low speeds and describes an inverted pendulum-like motion
i.e. the bicycle falls over. As speed increases the eigenvalues coalesce
into a complex conjugate pair at the weave bifurcation that describes an
exponentially increasing sinusoidal motion of roll and steer, with steer
lagging the roll. This mode becomes stable at a higher speed. The weave and
capsize critical speeds bound the stable speed range. Generated by
<cite>src/eom/linear_comparison.py</cite>.</p>
</div>
<p>The behavior of the modes of motion can be visualized by plotting the
eigenvector components in the complex plane for various speeds. For the speeds
shown in the root locus plots, there are four distinct speed ranges of
interest: below the weave bifurcation, between the weave bifurcation and the
weave critical speed, the stable speed range, and above the capsize critical
speed. At a forward speed of 0.5 m/s, all eigenvalues are real, with two
unstable and two stable. In <a class="reference internal" href="#figevechalf"><em>Figure 3.8</em></a>, notice that the
unstable eigenvalues predict two modes where the roll and steer states
exponentially increase and with roll and steer 180 degrees out of phase. These
modes describes a simple unstable inverted pendulum motion.</p>
<div class="figure align-center" id="figevechalf">
<a class="reference external image-reference" href="_images/eVecHalf.png"><img alt="_images/eVecHalf.png" src="_images/eVecHalf.png" style="width: 6in;" /></a>
<p class="caption">Normalized eigenvector components plotted in the real/imaginary plane for
each mode at 5.0 m/s. Only the roll angle, <span class="math">\(q_4\)</span>, and steer angle,
<span class="math">\(q_7\)</span>, components are shown. Generated by
<tt class="docutils literal"><span class="pre">src/eom/plot_eigenvectors.py</span></tt>.</p>
</div>
<p>For speeds above the weave bifurcation speed, this linear model exhibits three
distinct modes of motion, which have been named <em>weave</em>, <em>capsize</em>, and
<em>caster</em>. As the bicycle is brought up to a speed of 3 m/s the two unstable
eigenvalues coalesce into a complex pair. In <a class="reference internal" href="#figevechalf"><em>Figure 3.9</em></a>, the
left-most graph depicts the caster mode which simply shows a rapidly decaying
steer angle. The unstable weave mode eigenvector components show that the steer
amplitude is about 25% larger than the roll amplitude and roll angle leads the
steer angle by about 50 degrees. Finally, the capsize mode is a decays in roll
and steer, with the roll at about twice the amplitude as steer.</p>
<div class="figure align-center" id="figevecthree">
<a class="reference external image-reference" href="_images/eVecThree.png"><img alt="_images/eVecThree.png" src="_images/eVecThree.png" style="width: 6in;" /></a>
<p class="caption">Normalized eigenvector components plotted in the real/imaginary plane for
each mode at 3.0 m/s. Only the roll angle, <span class="math">\(q_4\)</span>, and steer angle,
<span class="math">\(q_7\)</span>, components are shown. Generated by
<tt class="docutils literal"><span class="pre">src/eom/plot_eigenvectors.py</span></tt></p>
</div>
<p>At 5 m/s all modes are stable with the weave mode showing that the roll now
only leads the steer by about 10 degrees. The caster and capsize are similar to
3 m/s.</p>
<div class="figure align-center" id="figevecfive">
<a class="reference external image-reference" href="_images/eVecFive.png"><img alt="_images/eVecFive.png" src="_images/eVecFive.png" style="width: 6in;" /></a>
<p class="caption">Normalized eigenvector components plotted in the real/imaginary plane for
each mode at 5.0 m/s. Only the roll angle, <span class="math">\(q_4\)</span>, and steer angle,
<span class="math">\(q_7\)</span>, components are shown. Generated by
<tt class="docutils literal"><span class="pre">src/eom/plot_eigenvectors.py</span></tt></p>
</div>
<p>Finally, at 7 m/s the capsize mode becomes unstable, with a slow exponential
increase primarily in roll.</p>
<div class="figure align-center" id="figevecseven">
<a class="reference external image-reference" href="_images/eVecSeven.png"><img alt="_images/eVecSeven.png" src="_images/eVecSeven.png" style="width: 6in;" /></a>
<p class="caption">Normalized eigenvector components plotted in the real/imaginary plane for
each mode at 7.0 m/s. Only the roll angle, <span class="math">\(q_4\)</span>, and steer angle,
<span class="math">\(q_7\)</span>, components are shown. Generated by
<tt class="docutils literal"><span class="pre">src/eom/plot_eigenvectors.py</span></tt></p>
</div>
<p>The eigenvalues and eigenvectors describe the complete motion of the linear
bicycle model where the motion from each mode is sum to gather the whole motion
at a given speed. Typical diamond frame bicycle designs with an average sized
rigid rider exhibit this basic behavior, but even small variations in some of
the parameters can change the system behavior drastically, especially with
regards to stability.</p>
</div>
<div class="section" id="parameter-conversion">
<h2>Parameter Conversion<a class="headerlink" href="#parameter-conversion" title="Permalink to this headline">¶</a></h2>
<p>This section details the conversion from the benchmark parameter set in
<a class="reference internal" href="zreferences.html#meijaard2007">[MPRS07]</a> to the presented parameter set, <a class="reference internal" href="#figbicyclegeometry"><em>Figure
3.2</em></a>. As mentioned earlier, the Meijaard parameters are not a
good choice when working with the non-linear derivation because most are not
constant with respect to configuration. So the parameters must be converted to
a configuration independent set. When the bicycle is in the nominal
configuration the parameters can be converted with the following relationships.</p>
<p>Starting with the geometry, the wheel radii are defined the same, but the
remaining geometry is calculated as</p>
<div class="math" id="equation-eqGeometryConversion">
<span class="eqno">(57)</span>\[d_1 = \operatorname{cos}(\lambda) (c + w - r_R \operatorname{tan}(\lambda))\]\[d_3 = -\operatorname{cos}(\lambda) (c - r_F \operatorname{tan}(\lambda))\]\[d_2 = \frac{(r_R + d_1 \operatorname{sin}(\lambda) - r_F + d_3
\operatorname{sin}(\lambda))}{\operatorname{cos}(\lambda)}\]</div>
<p>The mass center locations are</p>
<div class="math" id="equation-eqMassCenterConversion">
<span class="eqno">(58)</span>\[l_1 = x_B  \operatorname{cos}(\lambda) - z_B  \operatorname{sin}(\lambda) -
r_R  \operatorname{sin}(\lambda)\]\[l_2 = x_B  \operatorname{sin}(\lambda) + z_B  \operatorname{cos}(\lambda) +
r_R \operatorname{cos}(\lambda)\]\[l_4 = (z_H + r_F)  \operatorname{cos}(\lambda) + (x_H - w)
\operatorname{sin}(\lambda)\]\[l_3 = \frac{x_H - w - l_4  \operatorname{sin}(\lambda)}
{\operatorname{cos}(\lambda)}\]</div>
<p>The masses are equivalently defined. Here the left side gives the present
variables and the right gives the benchmark variables.</p>
<div class="math" id="equation-eqMassConversion">
<span class="eqno">(59)</span>\[m_C = m_B\]\[m_D = m_R\]\[m_E = m_H\]\[m_F = m_F\]</div>
<p>The moments of inertia of the wheels are also equivalently defined.</p>
<div class="math" id="equation-eqWheelInertiaConversion">
<span class="eqno">(60)</span>\[\begin{split}  \mathbf{I}_D =
  \begin{bmatrix}
    I_{D11} &amp; 0 &amp; 0\\
    0 &amp; I_{D22} &amp; 0\\
    0 &amp; 0 &amp; I_{D11}
  \end{bmatrix}
  = \mathbf{I}_R =
  \begin{bmatrix}
    I_{Rxx} &amp; 0 &amp; 0\\
    0 &amp; I_{Ryy} &amp; 0\\
    0 &amp; 0 &amp; I_{Rxx}
  \end{bmatrix}\end{split}\]\[\begin{split}  \mathbf{I}_F =
  \begin{bmatrix}
    I_{F11} &amp; 0 &amp; 0\\
    0 &amp; I_{F22} &amp; 0\\
    0 &amp; 0 &amp; I_{F11}
  \end{bmatrix}
  = \mathbf{I}_F =
  \begin{bmatrix}
    I_{Fxx} &amp; 0 &amp; 0\\
    0 &amp; I_{Fyy} &amp; 0\\
    0 &amp; 0 &amp; I_{Fxx}
  \end{bmatrix}\end{split}\]</div>
<p>The moments and products of inertia for the frame and fork require the
direction cosine matrix with respect to rotation through the steer axis tilt,
<span class="math">\(\lambda\)</span>.</p>
<div class="math" id="equation-eqConversionRotation">
<span class="eqno">(61)</span>\[\begin{split}\mathbf{R} =
\begin{bmatrix}
  c_\lambda &amp; 0 &amp; -s_\lambda\\
  0 &amp; 1 &amp; 0\\
  s_\lambda &amp; 0 &amp; c_\lambda
\end{bmatrix}\end{split}\]</div>
<div class="math" id="equation-eqFrameInertiaConversion">
<span class="eqno">(62)</span>\[\begin{split} \mathbf{I}_B =
 \begin{bmatrix}
   I_{Bxx} &amp; 0 &amp; I_{Bxz}\\
   0 &amp; I_{Byy} &amp; 0\\
   I_{Bxz} &amp; 0 &amp; I_{Bzz}
 \end{bmatrix}\end{split}\]\[ \mathbf{I}_C =  \mathbf{R} \mathbf{I}_B \mathbf{R}^T\]</div>
<div class="math" id="equation-eqForkInertiaConversion">
<span class="eqno">(63)</span>\[\begin{split}\mathbf{I}_H =
\begin{bmatrix}
  I_{Hxx} &amp; 0 &amp; I_{Hxz}\\
  0 &amp; I_{Hyy} &amp; 0\\
  I_{Hxz} &amp; 0 &amp; I_{Hzz}
\end{bmatrix}\end{split}\]\[\mathbf{I}_E =  \mathbf{R} \mathbf{I}_H \mathbf{R}^T\]</div>
</div>
<div class="section" id="notation">
<h2>Notation<a class="headerlink" href="#notation" title="Permalink to this headline">¶</a></h2>
<dl class="docutils">
<dt><span class="math">\(A,B,C,D,E,F\)</span></dt>
<dd>Reference frames and/or rigid bodies.</dd>
<dt><span class="math">\(d_1,d_2,d_3\)</span></dt>
<dd>Distances that describe the rear and front frame essential geometry.</dd>
<dt><span class="math">\(l_1,l_2,l_3,l_4\)</span></dt>
<dd>In plane distances to the rear and front frame centers of mass.</dd>
<dt><span class="math">\(m_C,m_D,m_E,m_F\)</span></dt>
<dd>Mass of each rigid body.</dd>
<dt><span class="math">\(\mathbf{I}_C,\mathbf{I}_D,\mathbf{I}_E,\mathbf{I}_F\)</span></dt>
<dd>Local inertia tensor of each rigid body.</dd>
<dt><span class="math">\(^Y\mathbf{R}^X\)</span></dt>
<dd>Rotation matrix of body or reference frame <span class="math">\(X\)</span> with respect to body
or reference frame <span class="math">\(Y\)</span>.</dd>
<dt><span class="math">\(q_i\)</span></dt>
<dd>Generalized coordinates.</dd>
<dt><span class="math">\(u_i\)</span></dt>
<dd>Generalized speeds.</dd>
<dt><span class="math">\(\hat{x}_1,\hat{x}_2,\hat{x}_3\)</span></dt>
<dd>Three orthogonal unit vectors in reference frame <span class="math">\(X\)</span>.</dd>
<dt><span class="math">\(x_o\)</span></dt>
<dd>Mass center of body <span class="math">\(X\)</span>.</dd>
<dt><span class="math">\(c_e\)</span></dt>
<dd>Point on the steer axis in both bodies <span class="math">\(C\)</span> and <span class="math">\(E\)</span>.</dd>
<dt><span class="math">\(d_n,f_n\)</span></dt>
<dd>Points fixed in the rear and front wheels which are instantaneously in
contact with the ground.</dd>
<dt><span class="math">\(\bar{r}^{y_o/x_o}\)</span></dt>
<dd>Vector from point <span class="math">\(x_o\)</span> to point <span class="math">\(y_o\)</span>.</dd>
<dt><span class="math">\(^X\bar{\omega}^Y\)</span></dt>
<dd>Angular velocity of frame <span class="math">\(Y\)</span> in frame <span class="math">\(X\)</span>.</dd>
<dt><span class="math">\(^Y\bar{v}^{x_o}\)</span></dt>
<dd>Velocity of point <span class="math">\(x_o\)</span> in reference frame <span class="math">\(Y\)</span>.</dd>
<dt><span class="math">\(^X\bar{\alpha}^Y\)</span></dt>
<dd>Angular acceleration of frame <span class="math">\(Y\)</span> in frame <span class="math">\(X\)</span>.</dd>
<dt><span class="math">\(^Y\bar{a}^{x_o}\)</span></dt>
<dd>Acceleration of point <span class="math">\(x_o\)</span> in reference frame <span class="math">\(Y\)</span>.</dd>
<dt><span class="math">\(s_1,c_1\)</span></dt>
<dd>Shorthand notation for <span class="math">\(\operatorname{sin}q_1\)</span> and
<span class="math">\(\operatorname{cos}q_1\)</span>.</dd>
<dt><span class="math">\(s_\lambda,c_\lambda\)</span></dt>
<dd>Shorthand notation for <span class="math">\(\operatorname{sin}\lambda\)</span> and
<span class="math">\(\operatorname{cos}\lambda\)</span>.</dd>
<dt><span class="math">\(\tilde{F}_r\)</span></dt>
<dd>Nonholonomic generalized active forces. The subscript <span class="math">\(r\)</span> denotes
one of the independent generalized speeds.</dd>
<dt><span class="math">\(^N\bar{V}_r^{x_o}\)</span></dt>
<dd>r<sup>th</sup> partial velocity of point <span class="math">\(x_o\)</span> in reference frame
<span class="math">\(N\)</span> with respect to the independent generalized speed, <span class="math">\(u_r\)</span>.</dd>
<dt><span class="math">\(\bar{R}^{x_o}\)</span></dt>
<dd>Resultant forces on the point <span class="math">\(x_o\)</span>.</dd>
<dt><span class="math">\(^N\bar{\omega}_r^C\)</span></dt>
<dd>r<sup>th</sup> partial angular velocity of reference frame <span class="math">\(C\)</span> in
reference frame <span class="math">\(N\)</span> with respect to the independent generalized speed,
<span class="math">\(u_r\)</span>.</dd>
<dt><span class="math">\(\bar{T}^C\)</span></dt>
<dd>Resultant torques acting on body <span class="math">\(C\)</span>.</dd>
<dt><span class="math">\(\tilde{F}^*_r\)</span></dt>
<dd>Nonholonomic generalized inertia forces. The subscript <span class="math">\(r\)</span> denotes
one of the independent generalized speeds.</dd>
<dt><span class="math">\(\bar{R}^*_{x_o}\)</span></dt>
<dd>Generalized inertia force of point <span class="math">\(x_o\)</span>.</dd>
<dt><span class="math">\(\bar{T}^*_X\)</span></dt>
<dd>Generalized inertia torque of body <span class="math">\(X\)</span>.</dd>
<dt><span class="math">\(I_X\)</span></dt>
<dd>Central inertia dyadic of body <span class="math">\(X\)</span>.</dd>
<dt><span class="math">\(\mathbf{A},\mathbf{B},\mathbf{C},\mathbf{D}\)</span></dt>
<dd>The state, input, output and feed-forward matrices.</dd>
</dl>
<p>The following benchmark parameters are all defined in <a class="reference internal" href="zreferences.html#meijaard2007">[MPRS07]</a>.</p>
<dl class="docutils">
<dt><span class="math">\(\lambda\)</span></dt>
<dd>Steer axis tilt.</dd>
<dt><span class="math">\(c\)</span></dt>
<dd>Trail.</dd>
<dt><span class="math">\(w\)</span></dt>
<dd>Wheelbase.</dd>
<dt><span class="math">\(r_F,r_R\)</span></dt>
<dd>Front and rear wheel radii.</dd>
<dt><span class="math">\(x_B,z_B,x_H,z_H\)</span></dt>
<dd>Mass center locations of the rear frame and front frame.</dd>
<dt><span class="math">\(B,R,H,F\)</span></dt>
<dd>Rigid bodies as defined in.</dd>
<dt><span class="math">\(m_B,m_R,m_H,m_F\)</span></dt>
<dd>Mass of each rigid body.</dd>
<dt><span class="math">\(\mathbf{I}_B,\mathbf{I}_R,\mathbf{I}_H,\mathbf{I}_F\)</span></dt>
<dd>Inertia tensor of each rigid body.</dd>
<dt><span class="math">\(v\)</span></dt>
<dd>Forward speed of the linear bicycle model.</dd>
<dt><span class="math">\(\mathbf{M},\mathbf{C}_1,\mathbf{K}_0,\mathbf{K}_2\)</span></dt>
<dd>Velocity and gravity independent mass, damping, and stiffness matrices of
the linearized Whipple model.</dd>
<dt><span class="math">\(\bar{q}\)</span></dt>
<dd>Essential coordinates.</dd>
</dl>
<p class="rubric">Footnotes</p>
<table class="docutils footnote" frame="void" id="apostrophe" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id1">[1]</a></td><td>These programming growing pangs were especially harsh with
Autolev. The program is unfortunately missing virtually all of the useful
tools and paradigms found in full-featured programming languages.</td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="kane" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id3">[2]</a></td><td>Kane himself has done work on bicycle and motorcycle models and made
use of his method to derive the equations of motion <a class="reference internal" href="zreferences.html#kane1975">[Kan75]</a>,
<a class="reference internal" href="zreferences.html#kane1977">[Kan77a]</a>, <a class="reference internal" href="zreferences.html#kane1977a">[Kan77b]</a>, <a class="reference internal" href="zreferences.html#kane1978">[Kan78]</a>, <a class="reference internal" href="zreferences.html#man1979">[MK79]</a>. Furthermore,
<a class="reference internal" href="zreferences.html#zytveld1975">[VZ75]</a> derived linear equations of motion of the bicycle and models
developed with AutoSim also employ Kane&#8217;s method <a class="reference internal" href="zreferences.html#sayers1990">[Say90]</a>,
<a class="reference internal" href="zreferences.html#sharp1999">[SLG99]</a>.</td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="autolev" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id6">[3]</a></td><td>Luke and I have dreamed of developing an open source version of
Autolev for years and that has finally culminated through primarily Luke and
Gilbert Gede&#8217;s efforts in the creation of <a class="reference external" href="http://www.sympy.org">sympy.physics.mechanics</a>.</td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="psiaki" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id18">[4]</a></td><td>The coordinates are also used by <a class="reference internal" href="zreferences.html#franke1990">[FSR90]</a>, among others.</td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="standard" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id20">[5]</a></td><td>I don&#8217;t necessarily agree that this is a great standard to follow,
because it creates much unessary confusion when defining and mapping between
parameterizations. The three axis pointing upward would be less error prone
because a bicycle is never below the ground plane, except maybe in an
academic.</td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="wheelcontact" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id21">[6]</a></td><td>The bicycle wheels&#8217; points of contact are abstract points in
dynamics. At any instant there are two coincident points at
the contact location: one on the wheel and one on the ground. If no-slip
rolling is assumed, both of these points are motionless, i.e. their
velocities are zero. These points are distinctly different from the
points that trace out the path on the ground of the wheel contact
locations through time. Those points are not motionless and therefore do have a
velocity.</td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="holonomic" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id23">[7]</a></td><td>This constraint can readily be modified to accomodate a
non-flat ground.</td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="validity" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id34">[8]</a></td><td>The very first model I developed in 2006 would not have held up
to this test. I owe the validity of my model to my lab mate, Luke, as his
persistence and interest in minute detail helped me bring my model up to
par. Several issues plagued both of our derivations. The first was an simple
missing apostrophe in my Autolev code, the second was that we had defined
our rear wheel rotation with respec to the <span class="math">\(B\)</span> frame instead of the
<span class="math">\(C\)</span> frame, the third was incorrect parameter conversions from the
<a class="reference internal" href="zreferences.html#meijaard2007">[MPRS07]</a> paper to our parameters, and the fourth was a bug in
my original code that I never found, with an entire code rewrite finally
giving me matching eigenvalues.</td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="eqconv" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id35">[9]</a></td><td>The conversion equations from the <a class="reference internal" href="zreferences.html#basu-mandal2007">[BMCP07]</a> coordinates to
the present set and vice versa can be found in the source code for the
DynamicistToolKit bicycle module.</td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="sigfig" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id38">[10]</a></td><td>Basu-Mandall presents varying significant digits from 10 to 14.</td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="nonlincompare" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id36">[11]</a></td><td>The variable names correspond to the convention provided in
<a class="reference internal" href="zreferences.html#basu-mandal2007">[BMCP07]</a>. This table is generated with <tt class="docutils literal"><span class="pre">src/eom/basu_comparison.py</span></tt>.</td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="lincompare" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id45">[12]</a></td><td>This table is generated with <tt class="docutils literal"><span class="pre">src/eom/linear_comparison.py</span></tt>.</td></tr>
</tbody>
</table>
</div>
</div>


<!--
<script type="text/javascript">
	var disqus_developer = 1;
</script>
-->
<h2>Comments</h2>
<div id="disqus_thread"></div>
<script type="text/javascript">
  /**
    * var disqus_identifier; [Optional but recommended: Define a unique identifier (e.g. post id or slug) for this thread]
    */
  (function() {
   var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
   dsq.src = 'https://jkm-dissertation.disqus.com/embed.js';
   (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>
<noscript>Please enable JavaScript to view the <a
		href="https://disqus.com/?ref_noscript=jkm-dissertation">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>


      </div>
      <div class="bottomnav">
      
        <p>
        «&#160;&#160;<a href="introduction.html">Introduction</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="extensions.html">Extensions of the Whipple Model</a>&#160;&#160;»
        </p>

      </div>


    <div class="footer">
        &copy; Copyright 2012, Jason K. Moore.
      Last updated on Jan 19, 2013.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
<script type="text/javascript">
var disqus_shortname = 'jkm-dissertation';
(function () {
  var s = document.createElement('script'); s.async = true;
  s.src = 'https://disqus.com/forums/jkm-dissertation/count.js';
  (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
}());
</script>

<div align="center">
<a rel="license" href="http://creativecommons.org/licenses/by/3.0/">
	<img
	alt="Creative Commons License" style="border-width:0"
	src="http://i.creativecommons.org/l/by/3.0/88x31.png" />
</a>
<br />
This work is licensed under a <a rel="license"
href="http://creativecommons.org/licenses/by/3.0/">Creative Commons
Attribution 3.0 Unported License</a>
</div>


  </body>
</html>